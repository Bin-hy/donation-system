{"version":3,"file":"js/app.d85ab951.js","mappings":"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","sources":["webpack://template-user/./src/utils/LoadingIcon.vue","webpack://template-user/./src/utils/LoadingIcon.vue?dd47","webpack://template-user/./src/components/NavBar.vue","webpack://template-user/./src/components/NavBar.vue?01fd","webpack://template-user/./src/App.vue","webpack://template-user/./src/App.vue?7ccd","webpack://template-user/./src/views/HomePage.vue","webpack://template-user/./src/views/HomePage.vue?150d","webpack://template-user/./src/views/AboutPage.vue","webpack://template-user/./src/views/AboutPage.vue?e075","webpack://template-user/./src/views/ServicesPage.vue","webpack://template-user/./src/views/ProjectDetail.vue","webpack://template-user/./src/views/ProjectDetail.vue?422f","webpack://template-user/./src/views/DonationPage.vue","webpack://template-user/./src/views/DonationPage.vue?f9ca","webpack://template-user/./src/api/api.js","webpack://template-user/./src/views/LoginRegister.vue","webpack://template-user/./src/views/LoginRegister.vue?8f4d","webpack://template-user/./src/views/NewsDetail.vue","webpack://template-user/./src/views/NewsDetail.vue?b9fc","webpack://template-user/./src/views/ProjectsPage.vue","webpack://template-user/./src/views/ProjectsPage.vue?1e5e","webpack://template-user/./src/views/NewsPage.vue","webpack://template-user/./src/views/NewsPage.vue?a0aa","webpack://template-user/./src/views/ApplyPage.vue","webpack://template-user/./src/views/ApplyPage.vue?d457","webpack://template-user/./src/views/ProfilePage.vue","webpack://template-user/./src/views/ProfilePage.vue?ccbe","webpack://template-user/./src/router/index.js","webpack://template-user/./src/main.js","webpack://template-user/webpack/bootstrap","webpack://template-user/webpack/runtime/chunk loaded","webpack://template-user/webpack/runtime/compat get default export","webpack://template-user/webpack/runtime/define property getters","webpack://template-user/webpack/runtime/global","webpack://template-user/webpack/runtime/hasOwnProperty shorthand","webpack://template-user/webpack/runtime/make namespace object","webpack://template-user/webpack/runtime/publicPath","webpack://template-user/webpack/runtime/jsonp chunk loading","webpack://template-user/webpack/startup"],"sourcesContent":["<template>\r\n  <img src=\"@/assets/warning-icon.png\" alt=\"warning-icon\" width=\"30\" height=\"30\" />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n","import { render } from \"./LoadingIcon.vue?vue&type=template&id=55f28919\"\nconst script = {}\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"navbar\">\r\n    <!-- 左侧：网站 Logo 和名称 -->\r\n    <div class=\"navbar-left\" @click=\"goToHome\">\r\n      <img src=\"@/assets/logo.png\" alt=\"Logo\" class=\"logo\" />\r\n      <span class=\"site-name\">心阳捐赠网</span>\r\n    </div>\r\n\r\n    <!-- 中间：导航栏目录 -->\r\n    <div class=\"navbar-center\">\r\n      <ul class=\"nav-links\">\r\n        <li\r\n            v-for=\"(link, index) in navLinks\"\r\n            :key=\"index\"\r\n            class=\"nav-item\"\r\n            :class=\"{ active: activeIndex === index }\"\r\n            @click=\"handleNavClick(link.path)\"\r\n        >\r\n          <span class=\"nav-link\">{{ link.name }}</span>\r\n          <div class=\"underline\" :class=\"{ 'underline-active': activeIndex === index }\"></div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- 右侧：用户头像和昵称 或 登录/注册按钮 -->\r\n    <div class=\"navbar-right\">\r\n      <!-- 如果用户已登录，显示用户信息 -->\r\n      <div\r\n          v-if=\"isLoggedIn\"\r\n          class=\"user-info\"\r\n          @mouseenter=\"handleMouseEnter\"\r\n          @mouseleave=\"handleMouseLeave\"\r\n      >\r\n        <img :src=\"user.avatar\" alt=\"用户头像\" class=\"user-avatar\" />\r\n        <span class=\"user-name\">{{ user.name }}</span>\r\n\r\n        <!-- 下拉菜单 -->\r\n        <div\r\n            v-if=\"showDropdown\"\r\n            class=\"dropdown-menu\"\r\n            @mouseenter=\"cancelCloseDropdown\"\r\n            @mouseleave=\"handleMouseLeave\"\r\n        >\r\n          <div class=\"dropdown-arrow\"></div>\r\n          <div class=\"dropdown-item\" @click=\"goToProfile\">\r\n            <el-icon><User /></el-icon>\r\n            <span>个人中心</span>\r\n          </div>\r\n          <div class=\"dropdown-item\" @click=\"logout\">\r\n            <el-icon><SwitchButton /></el-icon>\r\n            <span>退出登录</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 如果用户未登录，显示登录/注册按钮 -->\r\n      <button v-else class=\"login-register-btn\" @click=\"goToLoginRegister\">登录/注册</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router'; // 引入 useRoute\r\nimport { ElNotification } from 'element-plus';\r\nimport { User, SwitchButton } from '@element-plus/icons-vue';\r\nimport axios from 'axios';\r\nimport LoadingIcon from '@/utils/LoadingIcon.vue'; // 引入自定义组件\r\n\r\nconst router = useRouter();\r\nconst route = useRoute(); // 获取当前路由\r\n\r\n// 导航栏目录数据\r\nconst navLinks = [\r\n  { name: '首页', path: '/' },\r\n  { name: '公益项目', path: '/projects' },\r\n  { name: '新闻资讯', path: '/news' },\r\n  { name: '捐赠公示', path: '/apply' },\r\n  { name: '联系我们', path: '/about' },\r\n];\r\n\r\n// 用户信息\r\nconst user = ref({\r\n  name: '',\r\n  avatar: '',\r\n});\r\n\r\n// 当前选中的导航项索引\r\nconst activeIndex = ref(0);\r\n\r\n// 是否显示下拉菜单\r\nconst showDropdown = ref(false);\r\n\r\n// 用户是否已登录\r\nconst isLoggedIn = ref(false);\r\n\r\n// 用于延迟关闭的定时器\r\nlet closeTimer = null;\r\n\r\n// 检测 token 是否存在并获取用户信息\r\nconst checkLoginStatus = async () => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    isLoggedIn.value = true; // 用户已登录\r\n    try {\r\n      // 直接调用 API 获取用户信息\r\n      const response = await axios.get('/user/info', {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // 携带 token\r\n        },\r\n      });\r\n      // 更新用户信息\r\n      if (response.code === 200) {\r\n        user.value = {\r\n          name: response.data.nickname || '用户', // 使用昵称，如果没有则显示默认值\r\n          avatar: response.data.avatar || 'https://pisiyi.oss-cn-beijing.aliyuncs.com/%E7%94%A8%E6%88%B7.png', // 使用头像，如果没有则显示默认值\r\n        };\r\n      } else {\r\n        console.error('获取用户信息失败:', response.msg);\r\n        logout(); // 如果获取失败，执行退出登录\r\n      }\r\n    } catch (error) {\r\n      console.error('获取用户信息失败:', error);\r\n      logout(); // 如果请求失败，执行退出登录\r\n    }\r\n  } else {\r\n    isLoggedIn.value = false; // 用户未登录\r\n  }\r\n};\r\n\r\n// WebSocket 实例\r\nlet socket = null;\r\nconst isConnected = ref(false);\r\n\r\n// 连接 WebSocket\r\nconst connectWebSocket = (url, uuid) => {\r\n  socket = new WebSocket(`${url}?uuid=${uuid}`);\r\n\r\n  socket.onopen = () => {\r\n    isConnected.value = true;\r\n    console.log('WebSocket 连接已建立');\r\n  };\r\n\r\n  socket.onmessage = (event) => {\r\n    console.log('收到消息:', event.data);\r\n    // 处理收到的消息\r\n  };\r\n\r\n  socket.onclose = () => {\r\n    isConnected.value = false;\r\n    console.log('WebSocket 连接已关闭');\r\n    // 自动重连\r\n    setTimeout(() => {\r\n      connectWebSocket(url, uuid);\r\n    }, 3000); // 3 秒后重连\r\n  };\r\n\r\n  socket.onerror = (error) => {\r\n    console.error('WebSocket 错误:', error);\r\n  };\r\n};\r\n\r\n\r\n// 初始化时检查登录状态\r\nonMounted(() => {\r\n  checkLoginStatus();\r\n  // 监听路由变化，更新 activeIndex\r\n  watch(\r\n      () => route.path,\r\n      (newPath) => {\r\n        const index = navLinks.findIndex((link) => link.path === newPath);\r\n        if (index !== -1) {\r\n          activeIndex.value = index;\r\n        }\r\n      },\r\n      { immediate: true } // 立即执行一次\r\n  );\r\n\r\n  // 检测 WebSocket 连接状态\r\n  if (!isConnected.value) {\r\n    const uuid = localStorage.getItem('uuid'); // 从 localStorage 获取 uuid，如果没有则使用默认值\r\n    connectWebSocket('ws://localhost:8080/websocket', uuid);\r\n  }\r\n\r\n  // 监听页面刷新事件\r\n  window.addEventListener('beforeunload', () => {\r\n    if (socket) {\r\n      socket.close(); // 页面刷新前关闭 WebSocket\r\n    }\r\n  });\r\n});\r\n\r\n// 跳转到首页\r\nconst goToHome = () => {\r\n  router.push('/');\r\n};\r\n\r\n// 处理导航栏点击事件\r\nconst handleNavClick = (path) => {\r\n  if (path === '/') {\r\n    // 首页可以直接跳转\r\n    router.push(path);\r\n  } else if (!isLoggedIn.value) {\r\n    // 未登录时，跳转到登录界面\r\n    ElNotification({\r\n      title: '未登录',\r\n      message: '请先登录以访问此功能',\r\n      icon: LoadingIcon,\r\n      duration: 3000,\r\n    });\r\n    router.push('/login-register');\r\n  } else {\r\n    // 已登录时，正常跳转\r\n    router.push(path);\r\n  }\r\n};\r\n\r\n// 跳转到登录注册界面\r\nconst goToLoginRegister = () => {\r\n  router.push('/login-register');\r\n};\r\n\r\n// 跳转到个人中心\r\nconst goToProfile = () => {\r\n  router.push('/profile');\r\n};\r\n\r\n\r\n\r\n// 退出登录\r\nconst logout = () => {\r\n  localStorage.removeItem('token'); // 删除 token\r\n  isLoggedIn.value = false; // 更新登录状态\r\n  user.value = { name: '', avatar: '' }; // 清空用户信息\r\n  router.push('/login-register'); // 跳转到登录注册页面\r\n};\r\n\r\n// 鼠标进入用户信息区域\r\nconst handleMouseEnter = () => {\r\n  clearTimeout(closeTimer); // 清除关闭定时器\r\n  showDropdown.value = true; // 显示下拉菜单\r\n};\r\n\r\n// 鼠标离开用户信息区域\r\nconst handleMouseLeave = () => {\r\n  // 设置延迟关闭\r\n  closeTimer = setTimeout(() => {\r\n    showDropdown.value = false;\r\n  }, 300); // 延迟 300ms 关闭\r\n};\r\n\r\n// 鼠标进入下拉菜单区域，取消关闭\r\nconst cancelCloseDropdown = () => {\r\n  clearTimeout(closeTimer); // 清除关闭定时器\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 导航栏整体样式 */\r\n.navbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 20px;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  height: 60px;\r\n}\r\n\r\n/* 左侧：Logo 和网站名称 */\r\n.navbar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer; /* 添加鼠标指针样式 */\r\n}\r\n\r\n.logo {\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.site-name {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n/* 中间：导航栏目录 */\r\n.navbar-center {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.nav-links {\r\n  display: flex;\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.nav-item {\r\n  margin: 0 20px;\r\n  padding: 10px 0;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.nav-link {\r\n  text-decoration: none;\r\n  color: #333333;\r\n  font-size: 18px;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.nav-item.active .nav-link {\r\n  font-weight: 700;\r\n  color: #d32f2f;\r\n}\r\n\r\n.nav-item:hover .nav-link {\r\n  font-weight: 700;\r\n  color: #d32f2f;\r\n}\r\n\r\n.underline {\r\n  position: absolute;\r\n  bottom: -5px;\r\n  left: 0;\r\n  width: 0;\r\n  height: 2px;\r\n  background-color: #e40000;\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.underline-active {\r\n  width: 100%;\r\n}\r\n\r\n.nav-item:hover .underline {\r\n  width: 100%;\r\n}\r\n\r\n/* 右侧：用户头像和昵称 或 登录/注册按钮 */\r\n.navbar-right {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n/* 用户信息 */\r\n.user-info {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.user-avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n}\r\n\r\n.user-name {\r\n  font-size: 16px;\r\n  color: #333333;\r\n}\r\n\r\n/* 下拉菜单 */\r\n.dropdown-menu {\r\n  position: absolute;\r\n  top: calc(100% + 8px);\r\n  right: 0;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  border-radius: 4px;\r\n  padding: 8px 0;\r\n  min-width: 120px;\r\n  z-index: 1000;\r\n}\r\n\r\n.dropdown-arrow {\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 16px;\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 8px solid transparent;\r\n  border-right: 8px solid transparent;\r\n  border-bottom: 8px solid #ffffff;\r\n}\r\n\r\n.dropdown-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n  color: #333333;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.dropdown-item .el-icon {\r\n  margin-right: 8px;\r\n}\r\n\r\n.dropdown-item:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* 登录/注册按钮 */\r\n.login-register-btn {\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n  color: #ffffff;\r\n  background-color: #e40000;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.login-register-btn:hover {\r\n  background-color: #c40000;\r\n}\r\n</style>\r\n","import script from \"./NavBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=6efe69cb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6efe69cb\"]])\n\nexport default __exports__","<template>\n  <div>\n    <!-- 导航栏 -->\n    <NavBar v-if=\"showNavBar\" />\n\n    <!-- 页面内容 -->\n    <router-view />\n\n    <!-- 底部备案栏 -->\n    <div v-if=\"showFooter\" class=\"footer\">\n      <!-- 左边部分 -->\n      <div class=\"footer-column\">\n        <p>Copyright © 2012-2025 xinYang. All Rights Reserved.</p>\n        <p>广州星城科技有限公司 版权所有</p>\n        <p>京ICP证160478号</p>\n        <p>地址：北京市西城区西环广场A座12层1201</p>\n        <p>\n          <img src=\"@/assets/police-icon.png\" alt=\"公安图标\" class=\"police-icon\" />\n          豫公网安备 41010402002001号 豫ICP备11032585号-5\n        </p>\n      </div>\n\n      <!-- 右边部分 -->\n      <div class=\"footer-column\">\n        <img src=\"@/assets/logo.png\" alt=\"系统 Logo\" class=\"system-logo\" />\n        <p>联系电话：400-123-4567</p>\n        <p>微信号：xinchengwenhua</p>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport NavBar from '@/components/NavBar.vue';\n\nconst route = useRoute();\nconst showNavBar = ref(true);\nconst showFooter = ref(true);\n\n// 监听路由变化，动态控制导航栏和底部备案栏的显示\nwatch(\n    () => route.path,\n    (newPath) => {\n      // 如果当前路由是登录注册界面，隐藏导航栏和底部备案栏\n      if (newPath === '/login-register') {\n        showNavBar.value = false;\n        showFooter.value = false;\n      } else {\n        showNavBar.value = true;\n        showFooter.value = true;\n      }\n    },\n    { immediate: true }\n);\n</script>\n\n<style>\n/* 全局样式 */\nbody {\n  margin: 0;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n}\n\n/* 底部备案栏 */\n.footer {\n  display: flex;\n  justify-content: space-between; /* 左右两部分分开 */\n  align-items: center; /* 垂直居中 */\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-top: 1px solid #e9ecef;\n}\n\n.footer-column {\n  text-align: center;\n  margin-left: 200px;\n  flex: 1;\n}\n\n.footer-column p {\n  margin: 8px 0;\n  color: #666666;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.system-logo {\n  width: 80px;\n  height: auto;\n  margin-bottom: 10px;\n}\n\n.police-icon {\n  width: 16px; /* 根据实际图标大小调整 */\n  height: 16px; /* 根据实际图标大小调整 */\n  vertical-align: middle; /* 与文字垂直对齐 */\n  margin-right: 5px; /* 图标与文字的间距 */\n}\n</style>\n","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=95a668ce&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"home\">\r\n    <!-- 第一部分：轮播图 -->\r\n    <el-carousel :interval=\"3000\" height=\"400px\" arrow=\"always\" motion-blur>\r\n      <el-carousel-item\r\n          v-for=\"(item, index) in carouselItems\"\r\n          :key=\"index\"\r\n          @click=\"goToProjectDetail(item.projectId)\"\r\n      >\r\n      <img\r\n          :src=\"item.imageUrl\"\r\n      :alt=\"'轮播图 ' + (index + 1)\"\r\n      class=\"carousel-image\"\r\n      @error=\"handleImageError\"\r\n      />\r\n      </el-carousel-item>\r\n    </el-carousel>\r\n\r\n    <!-- 最新公告 -->\r\n    <div class=\"announcement-section\">\r\n      <div class=\"announcement-container\">\r\n        <!-- 左边：最新公告标题 -->\r\n        <h2 class=\"announcement-title\">\r\n          <el-icon class=\"title-icon\"><Reading /></el-icon> 最新新闻\r\n        </h2>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 第二部分：新闻资讯 -->\r\n    <div class=\"news-section\">\r\n      <!-- 新闻轮播图 -->\r\n      <div class=\"left-carousel\">\r\n        <el-carousel :interval=\"3000\" height=\"405px\" arrow=\"always\" motion-blur width=\"540px\">\r\n          <el-carousel-item\r\n              v-for=\"(item, index) in newsList.slice(0, 4)\"\r\n              :key=\"index\"\r\n              @click=\"goToNewsDetail(item.id)\"\r\n          >\r\n            <img\r\n                :src=\"item.coverUrl\"\r\n                :alt=\"item.title\"\r\n                class=\"carousel-image\"\r\n                @error=\"handleImageError\"\r\n            />\r\n            <div class=\"carousel-overlay\">\r\n              <h3 class=\"overlay-title\">{{ item.title }}</h3>\r\n            </div>\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </div>\r\n\r\n      <!-- 新闻列表 -->\r\n      <div class=\"right-news\">\r\n        <div\r\n            v-for=\"(news, index) in newsList.slice(4)\"\r\n            :key=\"index\"\r\n            class=\"news-item\"\r\n            @click=\"goToNewsDetail(news.id)\"\r\n        >\r\n          <h3 class=\"news-title\">{{ news.title }}</h3>\r\n          <p class=\"news-content\" v-html=\"news.content.slice(0, 80) + '...'\"></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 最新公告 -->\r\n    <div class=\"announcement-section\">\r\n      <div class=\"announcement-container\">\r\n        <!-- 左边：最新公告标题 -->\r\n        <h2 class=\"announcement-title\">\r\n          <el-icon class=\"title-icon\"><HelpFilled /></el-icon> 慈善资讯\r\n        </h2>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 第三部分：慈善项目 -->\r\n    <div class=\"charity-projects\">\r\n      <div\r\n          v-for=\"(project, index) in charityProjects\"\r\n          :key=\"index\"\r\n          class=\"project-item\"\r\n          @click=\"goToProjectDetail(project.id)\"\r\n      >\r\n        <img :src=\"project.image\" :alt=\"project.title\" class=\"project-image\" />\r\n        <h3 class=\"project-title\">{{ project.title }}</h3>\r\n        <p class=\"project-time\">\r\n          <span class=\"project-category\">{{ getCategoryName(project.category) }}</span>\r\n          <span class=\"project-date\">{{ formatDate(project.startDate) }} - {{ formatDate(project.endDate) }}</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 最新公告 -->\r\n    <div class=\"announcement-section\">\r\n      <div class=\"announcement-container\">\r\n        <!-- 左边：最新公告标题 -->\r\n        <h2 class=\"announcement-title\">\r\n          <el-icon class=\"title-icon\"><Document /></el-icon> 信息公开\r\n        </h2>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 信息公开列表 -->\r\n    <div class=\"info-disclosure\">\r\n      <!-- 信息公开列表 -->\r\n        <div\r\n            v-for=\"(info, index) in infoList\"\r\n            :key=\"index\"\r\n            class=\"info-item\"\r\n            @click=\"goToFileUrl(info.fileUrl)\"\r\n        >\r\n          <img :src=\"info.imageUrl\" :alt=\"公开数据\" class=\"info-image\" />\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport {ElCarousel, ElCarouselItem, ElIcon, ElNotification} from 'element-plus';\r\nimport { Reading, HelpFilled, Document } from '@element-plus/icons-vue';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport LoadingIcon from '@/utils/LoadingIcon.vue'; // 引入自定义组件\r\n\r\nconst router = useRouter();\r\n\r\n// 检查是否已登录\r\nconst isLoggedIn = () => {\r\n  return !!localStorage.getItem('token'); // 检查是否存在 Token\r\n};\r\n\r\n// 轮播图数据\r\nconst carouselItems = ref([]);\r\n\r\n// 获取轮播图数据\r\nconst fetchCarouselData = async () => {\r\n  try {\r\n    const response = await axios.get('/user/carousel/list'); // 调用接口\r\n    if (response.code === 200) {\r\n      carouselItems.value = response.data; // 绑定数据\r\n    } else {\r\n      console.error('获取轮播图数据失败:', response.data.msg);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取轮播图数据失败:', error);\r\n  }\r\n};\r\n\r\n\r\n// 跳转到项目详情页\r\nconst goToProjectDetail = (projectId) => {\r\n  if (!isLoggedIn()) {\r\n    // 弹出通知\r\n    ElNotification({\r\n      title: '未登录',\r\n      message: '请先登录以访问此功能',\r\n      icon: LoadingIcon,\r\n      duration: 3000, // 通知显示时间（毫秒）\r\n    });\r\n    router.push({ name: 'LoginRegister' }); // 跳转到登录界面\r\n    return;\r\n  }\r\n  if (projectId) {\r\n    router.push({ name: 'ProjectDetail', params: { id: projectId } });\r\n  } else {\r\n    console.warn('当前轮播图未绑定项目');\r\n  }\r\n};\r\n\r\nconst newsList = ref([]);\r\n\r\n// 获取新闻推荐数据\r\nconst fetchNewsRecommendData = async () => {\r\n  try {\r\n    const response = await axios.get('/user/news/recommend'); // 调用接口\r\n    if (response.code === 200) {\r\n      newsList.value = response.data; // 绑定数据\r\n      console.log(newsList.value);\r\n    } else {\r\n      console.error('获取新闻推荐数据失败:', response.data.msg);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取新闻推荐数据失败:', error);\r\n  }\r\n};\r\n\r\n// 跳转到新闻详情页\r\nconst goToNewsDetail = (newsId) => {\r\n  router.push({ name: 'NewsDetail', params: { id: newsId } });\r\n};\r\n\r\n// 慈善项目数据\r\nconst charityProjects = ref([]);\r\n\r\n// 获取慈善项目数据\r\nconst fetchCharityProjects = async () => {\r\n  try {\r\n    const response = await axios.get('/user/projects/recommend'); // 调用接口\r\n    if (response.code === 200) {\r\n      charityProjects.value = response.data; // 绑定数据\r\n      console.log('慈善项目数据:', charityProjects.value);\r\n    } else {\r\n      console.error('获取慈善项目数据失败:', response.msg);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取慈善项目数据失败:', error);\r\n  }\r\n};\r\n\r\n// 信息公开数据\r\nconst infoList = ref([]);\r\n\r\n// 获取信息公开数据\r\nconst fetchInfoDisclosureData = async () => {\r\n  try {\r\n    const response = await axios.get('/user/info-disclosure/list'); // 调用接口\r\n    if (response.code === 200) {\r\n      infoList.value = response.data; // 绑定数据\r\n      console.log('信息公开数据:', infoList.value);\r\n    } else {\r\n      console.error('获取信息公开数据失败:', response.msg);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取信息公开数据失败:', error);\r\n  }\r\n};\r\n\r\n// 跳转到文件 URL\r\nconst goToFileUrl = (fileUrl) => {\r\n  if (fileUrl) {\r\n    window.open(fileUrl, '_blank'); // 在新标签页中打开\r\n  } else {\r\n    console.warn('当前信息公开项未绑定文件 URL');\r\n  }\r\n};\r\n\r\n// 图片加载失败处理\r\nconst handleImageError = (event) => {\r\n  event.target.src = 'https://via.placeholder.com/208x136?text=图片加载失败'; // 替换为默认图片或占位符\r\n};\r\n\r\n// 格式化日期\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString(); // 根据本地化格式显示日期\r\n};\r\n\r\n// 获取项目类型名称\r\nconst getCategoryName = (category) => {\r\n  const categoryMap = {\r\n    0: '扶贫济困',\r\n    1: '健康医疗',\r\n    2: '助老扶幼',\r\n    3: '文化教育',\r\n    4: '社会服务',\r\n    5: '科技环保',\r\n    6: '灾难救助',\r\n    7: '专项基金',\r\n  };\r\n  return categoryMap[category] || '未知类型';\r\n};\r\n\r\n// 组件挂载时获取数据\r\nonMounted(() => {\r\n  fetchInfoDisclosureData();\r\n  fetchNewsRecommendData(); // 获取新闻推荐数据\r\n  fetchCarouselData();\r\n  fetchCharityProjects();\r\n});\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.home {\r\n  text-align: center;\r\n}\r\n\r\n.carousel-image {\r\n  width: 100%;\r\n  height: 110%;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* 自定义轮播图样式 */\r\n.el-carousel {\r\n  max-width: 1800px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-carousel__item {\r\n  background-color: #f5f5f5;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* 新闻资讯部分 */\r\n.news-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n/* 左侧轮播图 */\r\n.left-carousel {\r\n  width: 540px;\r\n  height: 405px;\r\n}\r\n\r\n.h2-title {\r\n  text-align: left;\r\n  margin-left: 160px;\r\n  margin-top: 60px;\r\n}\r\n\r\n/* 右侧新闻列表 */\r\n.right-news {\r\n  margin-top: -10px;\r\n  width: calc(100% - 600px); /* 减去左侧轮播图宽度和间距 */\r\n}\r\n\r\n.news-item {\r\n  margin-bottom: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.news-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.news-content {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n/* 轮播图覆盖层 */\r\n.carousel-overlay {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  padding: 4px;\r\n  background: rgba(0, 0, 0, 0.6); /* 半透明黑色背景 */\r\n  color: white;\r\n  text-align: left;\r\n  border-radius: 0 0 8px 8px; /* 底部圆角 */\r\n}\r\n\r\n.overlay-title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin: 0;\r\n}\r\n\r\n/* 慈善项目部分 */\r\n.charity-projects {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr); /* 4列 */\r\n  gap: 20px; /* 项目之间的间距 */\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.project-item {\r\n  text-align: left;\r\n  background-color: #fff; /* 背景色 */\r\n  border-radius: 8px; /* 圆角 */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 阴影效果 */\r\n  overflow: hidden; /* 防止内容溢出 */\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease; /* 添加过渡效果 */\r\n}\r\n\r\n.project-item:hover {\r\n  transform: translateY(-5px); /* 悬停时上移 */\r\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* 悬停时阴影加深 */\r\n}\r\n\r\n.project-image {\r\n  width: 100%;\r\n  height: 200px;\r\n  object-fit: cover;\r\n  border-radius: 8px 8px 0 0; /* 图片顶部圆角 */\r\n}\r\n\r\n.project-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin: 10px 0 5px;\r\n  padding: 0 16px; /* 内边距 */\r\n}\r\n\r\n.project-time {\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  color: #f10000;\r\n  text-align: right; /* 时间靠右对齐 */\r\n  padding: 0 16px; /* 内边距 */\r\n}\r\n\r\n/* 最新公告部分 */\r\n.announcement-section {\r\n\r\n  margin-left: 160px;\r\n  width: 200px;\r\n  background-color: #f10000;\r\n  padding: 10px 0;\r\n}\r\n\r\n.announcement-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  max-width: 150px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.announcement-title {\r\n  color: white; /* 白色文字 */\r\n  font-size: 20px;\r\n  margin: 0;\r\n  padding-right: 20px;\r\n  display: flex;\r\n  align-items: center; /* 图标与文字垂直居中 */\r\n}\r\n\r\n.title-icon {\r\n  font-size: 24px; /* 图标大小 */\r\n  margin-right: 8px; /* 图标与文字的间距 */\r\n}\r\n\r\n.announcement-content {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  position: relative;\r\n}\r\n\r\n.announcement-text {\r\n  position: absolute;\r\n  white-space: nowrap;\r\n  color: white; /* 白色文字 */\r\n  font-size: 16px;\r\n}\r\n\r\n.donate-button {\r\n  margin-left: 20px;\r\n}\r\n\r\n/* 信息公开部分 */\r\n.info-disclosure {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.info-item {\r\n  width: 275px;\r\n  height: 113px;\r\n  text-align: center;\r\n  background-color: #fff; /* 背景色 */\r\n  border-radius: 8px; /* 圆角 */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 阴影效果 */\r\n  overflow: hidden; /* 防止内容溢出 */\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease; /* 添加过渡效果 */\r\n}\r\n\r\n.info-item:hover {\r\n  transform: translateY(-5px); /* 悬停时上移 */\r\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* 悬停时阴影加深 */\r\n}\r\n\r\n.info-image {\r\n  width: 100%;\r\n  height: 113px; /* 图片高度 */\r\n  object-fit: cover;\r\n  border-radius: 8px 8px 0 0; /* 图片顶部圆角 */\r\n}\r\n\r\n.info-title {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  margin: 8px 0;\r\n  padding: 0 8px; /* 内边距 */\r\n}\r\n\r\n.project-time {\r\n  display: flex;\r\n  justify-content: space-between; /* 项目类型和起止日期分别靠左和靠右 */\r\n  align-items: center; /* 垂直居中 */\r\n  padding: 0 16px; /* 内边距 */\r\n  font-size: 14px;\r\n}\r\n\r\n.project-category {\r\n\r\n  color: #000; /* 项目类型为黑色 */\r\n}\r\n\r\n.project-date {\r\n  color: #f10000; /* 起止日期为红色 */\r\n}\r\n</style>\r\n","import script from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=48da4702&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48da4702\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <!-- 切换按钮 -->\r\n    <div class=\"tabs\">\r\n      <button :class=\"{ active: currentTab === 'card' }\" @click=\"currentTab = 'card'\">\r\n        名片\r\n      </button>\r\n      <button :class=\"{ active: currentTab === 'messageWall' }\" @click=\"currentTab = 'messageWall'\">\r\n        留言墙\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 名片模块 -->\r\n    <div v-if=\"currentTab === 'card'\" class=\"contact\">\r\n      <div class=\"project-list-div\">联系我们</div>\r\n      <div class=\"contact-container\">\r\n        <!-- 基金会信息 -->\r\n        <div class=\"contact-item\">\r\n          <h2>北京市心阳慈善基金会</h2>\r\n          <p>电话：400-172-7014</p>\r\n          <p>邮箱：xinyang@foxmail.com</p>\r\n          <p>地址：北京市顺义区牛栏山镇牛富路牛山段3号</p>\r\n          <p>邮编：101301</p>\r\n        </div>\r\n\r\n        <!-- 学生资助客服 -->\r\n        <div class=\"contact-item1\">\r\n          <img src=\"@/assets/xu_student.png\" alt=\"学生资助客服\" class=\"contact-image\" />\r\n          <p>学生资助客服</p>\r\n        </div>\r\n\r\n        <!-- 爱心人士客服 -->\r\n        <div class=\"contact-item1\">\r\n          <img src=\"@/assets/wx_user.png\" alt=\"爱心人士客服\" class=\"contact-image\" />\r\n          <p>爱心人士客服</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 留言墙模块 -->\r\n    <div v-if=\"currentTab === 'messageWall'\" class=\"message-wall-container\">\r\n      <div class=\"project-list-div\">留言墙</div>\r\n      <!-- 弹幕容器 -->\r\n      <div class=\"danmu-container\">\r\n        <div\r\n            v-for=\"(message, index) in messages\"\r\n            :key=\"index\"\r\n            :style=\"message.style\"\r\n            class=\"danmu-item\"\r\n            @mouseenter=\"pauseAnimation(index)\"\r\n            @mouseleave=\"resumeAnimation(index)\"\r\n        >\r\n          <img :src=\"message.avatar\" alt=\"头像\" class=\"danmu-avatar\" />\r\n          <span class=\"danmu-text\">{{ message.text }}</span>\r\n        </div>\r\n      </div>\r\n      <!-- 输入框和提交按钮 -->\r\n      <div class=\"message-input-container\">\r\n        <textarea\r\n            v-model=\"newMessage\"\r\n            placeholder=\"请输入您的留言\"\r\n            class=\"message-input\"\r\n        ></textarea>\r\n        <button @click=\"addMessage\" class=\"submit-button\">提交留言</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\n\r\n// 当前选中的选项卡\r\nconst currentTab = ref('card');\r\n\r\n// 弹幕样式计算\r\nconst getDanmuStyle = () => {\r\n  const top = Math.floor(Math.random() * 80) + 10; // 随机顶部位置\r\n  const duration = Math.floor(Math.random() * 10) + 5; // 随机滚动速度\r\n  return {\r\n    top: `${top}%`,\r\n    animationDuration: `${duration}s`,\r\n  };\r\n};\r\n\r\n// 留言墙数据\r\nconst messages = ref([]);\r\n\r\n// 新留言内容\r\nconst newMessage = ref('');\r\n\r\n// 获取留言数据\r\nconst fetchMessages = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token'); // 从本地存储中获取令牌\r\n    const response = await axios.get('/user/barrages', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`, // 将令牌添加到请求头\r\n      },\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      // 将后端返回的留言数据格式化\r\n      messages.value = response.data.map(message => ({\r\n        text: message.content,\r\n        avatar: message.avatar, // 使用后端返回的头像\r\n        style: getDanmuStyle(), // 动态生成弹幕样式\r\n      }));\r\n    } else {\r\n      throw new Error('获取留言数据失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('获取留言数据失败', error);\r\n    ElMessage.error('获取留言数据失败，请稍后重试');\r\n  }\r\n};\r\n\r\n// 添加留言\r\nconst addMessage = async () => {\r\n  if (newMessage.value.trim()) {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post(\r\n          '/user/barrages',\r\n          { content: newMessage.value },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n      );\r\n      if (response.code === 200) {\r\n        // 提交成功后，重新获取留言数据\r\n        await fetchMessages();\r\n        newMessage.value = ''; // 清空输入框\r\n        ElMessage.success('留言提交成功');\r\n      } else {\r\n        throw new Error('留言提交失败');\r\n      }\r\n    } catch (error) {\r\n      console.error('留言提交失败', error);\r\n      ElMessage.error('您已经被禁止发送弹幕，请联系管理员');\r\n    }\r\n  } else {\r\n    ElMessage.warning('留言内容不能为空');\r\n  }\r\n};\r\n\r\n// 暂停动画\r\nconst pauseAnimation = (index) => {\r\n  const danmuItem = document.querySelectorAll('.danmu-item')[index];\r\n  if (danmuItem) {\r\n    danmuItem.style.animationPlayState = 'paused';\r\n  }\r\n};\r\n\r\n// 恢复动画\r\nconst resumeAnimation = (index) => {\r\n  const danmuItem = document.querySelectorAll('.danmu-item')[index];\r\n  if (danmuItem) {\r\n    danmuItem.style.animationPlayState = 'running';\r\n  }\r\n};\r\n\r\n// 生命周期钩子\r\nonMounted(() => {\r\n  fetchMessages(); // 组件挂载时获取留言数据\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.tabs {\r\n  margin-top: 30px;\r\n  margin-left: 300px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.tabs button {\r\n  padding: 10px 20px;\r\n  margin: 0 10px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background-color: #f0f0f0;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n}\r\n\r\n.tabs button.active {\r\n  background-color: #b50020;\r\n  color: #fff;\r\n}\r\n\r\n.contact {\r\n  height: 334px;\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n  margin-left: 20%;\r\n  width: 60%;\r\n  padding: 20px;\r\n  text-align: center;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.project-list-div {\r\n  font-weight: 700;\r\n  font-size: 1.7rem;\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  text-overflow: ellipsis;\r\n  color: #b50020;\r\n  -webkit-box-orient: vertical;\r\n  font-family: 'createCrudeBlack', serif;\r\n  width: max-content;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.contact-container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: flex-start;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n}\r\n\r\n.contact-item {\r\n  text-align: left;\r\n  width: 400px;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.contact-item1 {\r\n  text-align: center;\r\n  flex: 1;\r\n  max-width: 400px;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.contact-item h2 {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.contact-item p {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.contact-image {\r\n  width: 150px;\r\n  height: 150px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.message-wall-container {\r\n  height: 534px;\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n  margin-left: 20%;\r\n  width: 60%;\r\n  padding: 20px;\r\n  text-align: center;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.danmu-container {\r\n  position: relative;\r\n  height: 400px;\r\n  overflow: hidden;\r\n}\r\n\r\n.danmu-item {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: rgba(255, 255, 255, 0.9); /* 背景色 */\r\n  border-radius: 20px; /* 胶囊圆角 */\r\n  padding: 5px 10px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* 阴影 */\r\n  animation: danmu linear infinite;\r\n  animation-play-state: running; /* 默认动画播放 */\r\n}\r\n\r\n.danmu-item:hover {\r\n  animation-play-state: paused; /* 鼠标悬停时暂停动画 */\r\n}\r\n\r\n.message-input-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.message-input {\r\n  flex: 1;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.submit-button {\r\n  padding: 10px 20px;\r\n  background-color: #b50020;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.submit-button:hover {\r\n  background-color: #8c0018;\r\n}\r\n\r\n.danmu-avatar {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%; /* 圆形头像 */\r\n  margin-right: 10px; /* 头像和文字的间距 */\r\n}\r\n\r\n.danmu-text {\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n@keyframes danmu {\r\n  from {\r\n    transform: translateX(-100%); /* 从左边开始 */\r\n  }\r\n  to {\r\n    transform: translateX(100vw); /* 移动到视口右边边界时消失 */\r\n  }\r\n}\r\n</style>\r\n","import script from \"./AboutPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AboutPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AboutPage.vue?vue&type=style&index=0&id=cbf75384&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cbf75384\"]])\n\nexport default __exports__","import script from \"./ServicesPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ServicesPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ServicesPage.vue?vue&type=style&index=0&id=3a9ff690&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3a9ff690\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <!-- 上方：项目详情 -->\r\n    <div class=\"project-detail\">\r\n      <!-- 左边：项目图片 -->\r\n      <div class=\"left-section\">\r\n        <img :src=\"project.image\" :alt=\"project.title\" class=\"project-image\" />\r\n        <!-- 状态标签 -->\r\n        <div class=\"status-tag\" :class=\"project.status === '进行中' ? 'ongoing' : 'ended'\">\r\n          {{ project.status }}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右边：项目信息 -->\r\n      <div class=\"right-section\">\r\n        <!-- 项目名称 -->\r\n        <h1 class=\"project-title\">{{ project.title }}</h1>\r\n\r\n        <!-- 备案编号 -->\r\n        <div class=\"info-item\">\r\n          <span class=\"info-label\">备案编号：</span>\r\n          <span class=\"info-value\">{{ project.recordNumber }}</span>\r\n        </div>\r\n\r\n        <!-- 目标金额 -->\r\n        <div class=\"info-item\">\r\n          <span class=\"info-label\">目标金额：</span>\r\n          <span class=\"info-value\" style=\"font-style: italic;font-size: 20px\">￥{{ project.targetAmount }} 元</span>\r\n        </div>\r\n\r\n        <!-- 已筹金额（含线下） -->\r\n        <div class=\"info-item\">\r\n          <span class=\"info-label\">已筹金额（含线下）：</span>\r\n          <span class=\"info-value\">￥{{ project.raisedAmount }} 元</span>\r\n        </div>\r\n\r\n        <!-- 爱心次数 -->\r\n        <div class=\"info-item\">\r\n          <span class=\"info-label\">爱心次数：</span>\r\n          <span class=\"info-value\">{{ project.donationCount }} 次</span>\r\n        </div>\r\n\r\n        <!-- 起止日期 -->\r\n        <div class=\"info-item\">\r\n          <span class=\"info-label\">起止日期：</span>\r\n          <span class=\"info-value\">{{ formatDate(project.startDate) }} 至 {{ formatDate(project.endDate) }}</span>\r\n        </div>\r\n\r\n        <!-- 我要捐赠按钮 -->\r\n        <div class=\"donate-button-container\">\r\n          <el-button\r\n              type=\"danger\"\r\n              class=\"donate-button\"\r\n              :disabled=\"project.status === '已结束'\"\r\n              @click=\"goToDonationPage\"\r\n          >\r\n            我要捐赠\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 下方：左右分栏模块 -->\r\n    <div class=\"bottom-section\">\r\n      <!-- 左边：切换模块 -->\r\n      <div class=\"left-module\">\r\n        <!-- 切换按钮 -->\r\n        <div class=\"tab-buttons\">\r\n          <el-button\r\n              v-for=\"tab in tabs\"\r\n              :key=\"tab.name\"\r\n              :class=\"{ active: activeTab === tab.name }\"\r\n              @click=\"handleTabChange(tab.name)\"\r\n          >\r\n            {{ tab.label }}\r\n          </el-button>\r\n        </div>\r\n\r\n        <!-- 切换内容 -->\r\n        <div class=\"tab-content\">\r\n          <!-- 基本信息 -->\r\n          <div v-show=\"activeTab === 'basic'\">\r\n            <!-- 项目详情 -->\r\n            <div class=\"info-section\">\r\n              <h2>项目详情</h2>\r\n              <p style=\"font-family: 仿宋,serif;\">{{ project.details }}</p>\r\n            </div>\r\n\r\n            <!-- 慈善机构信息 -->\r\n            <div class=\"info-section\" v-if=\"project.orgInfo\">\r\n              <h2>慈善机构信息</h2>\r\n              <ul class=\"info-list\">\r\n                <li><strong>发起机构：</strong>{{ project.orgInfo.initiator }}</li>\r\n                <li><strong>善款接收机构：</strong>{{ project.orgInfo.receiver }}</li>\r\n                <li><strong>执行机构：</strong>{{ project.orgInfo.executor }}</li>\r\n              </ul>\r\n            </div>\r\n\r\n            <!-- 项目信息 -->\r\n            <div class=\"info-section\" v-if=\"project.projectInfo\">\r\n              <h2>项目信息</h2>\r\n              <ul class=\"info-list\">\r\n                <li><strong>募捐目的：</strong>{{ project.projectInfo.purpose }}</li>\r\n                <li><strong>募捐成本：</strong>{{ project.projectInfo.cost }}</li>\r\n                <li><strong>剩余财产处理方案：</strong>{{ project.projectInfo.surplusPlan }}</li>\r\n                <li><strong>发票开具方式：</strong>{{ project.projectInfo.invoiceMethod }}</li>\r\n                <li><strong>联系方式：</strong>{{ project.projectInfo.contact }}</li>\r\n                <li><strong>募得款物用途：</strong>{{ project.projectInfo.fundUsage }}</li>\r\n                <li><strong>受益人：</strong>{{ project.projectInfo.beneficiaries }}</li>\r\n                <li><strong>活动负责人：</strong>{{ project.projectInfo.leader }}</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 收支明细 -->\r\n          <div v-show=\"activeTab === 'finance'\">\r\n            <!-- 搜索表单 -->\r\n            <el-form :model=\"searchForm\" label-width=\"80px\" class=\"search-form\">\r\n              <el-row :gutter=\"20\">\r\n                <el-col :span=\"6\">\r\n                  <el-form-item label=\"昵称\">\r\n                    <el-input v-model=\"searchForm.username\" placeholder=\"请输入昵称\" clearable />\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-form-item label=\"支付方式\">\r\n                    <el-select v-model=\"searchForm.paymentMethod\" placeholder=\"请选择支付方式\" clearable>\r\n                      <el-option label=\"全部\" value=\"\" />\r\n                      <el-option label=\"支付宝\" value=\"0\" />\r\n                      <el-option label=\"微信\" value=\"1\" />\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"9\">\r\n                  <el-form-item label=\"时间范围\">\r\n                    <el-date-picker\r\n                        v-model=\"searchForm.timeRange\"\r\n                        type=\"datetimerange\"\r\n                        range-separator=\"至\"\r\n                        start-placeholder=\"开始时间\"\r\n                        end-placeholder=\"结束时间\"\r\n                        value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n                    />\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"3\">\r\n                  <el-button style=\"background-color: #ff0000;color: white;margin-left: 16px;\" @click=\"handleSearch\">搜索</el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n\r\n            <!-- 表格 -->\r\n            <el-table\r\n                v-if=\"financeList.length > 0\"\r\n                :data=\"paginatedFinanceList\"\r\n                border\r\n                :header-cell-style=\"{background:'rgb(245, 247, 250)',color:'#666666'}\"\r\n                style=\"width: 99.5%;text-align: center\"\r\n                size=\"large\"\r\n            >\r\n              <el-table-column prop=\"username\" label=\"爱心人士\" width=\"100\" align=\"center\"/>\r\n              <el-table-column prop=\"amount\" label=\"金额\" width=\"70\" align=\"center\"/>\r\n              <el-table-column prop=\"time\" label=\"时间\" width=\"180\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                  {{ formatDate(row.time) }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"category\" label=\"分类\" width=\"120\" align=\"center\"/>\r\n              <el-table-column prop=\"paymentMethod\" label=\"支付方式\" width=\"120\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                  {{ row.paymentMethod === 0 ? '支付宝' : '微信' }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"捐赠是否来自境外\" width=\"150\" align=\"center\">\r\n                <template #default=\"{ row }\">\r\n                  <el-tag :type=\"row.isForeign ? 'danger' : 'success'\">\r\n                    {{ row.isForeign ? '是' : '否' }}\r\n                  </el-tag>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n\r\n            <!-- 分页 -->\r\n            <el-pagination\r\n                v-if=\"financeList.length > 0\"\r\n                class=\"pagination\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"pageSize\"\r\n                :total=\"financeList.length\"\r\n                layout=\"prev, pager, next, jumper, ->, total\"\r\n                @current-change=\"currentPage = $event\"\r\n            />\r\n          </div>\r\n\r\n          <!-- 投诉反馈 -->\r\n          <div v-show=\"activeTab === 'feedback'\">\r\n            <!-- 表单区域 -->\r\n            <el-form :model=\"feedbackForm\" :rules=\"feedbackRules\" ref=\"feedbackFormRef\">\r\n              <!-- 提示信息 -->\r\n              <div class=\"feedback-tips\">\r\n                <p>温馨提示：</p>\r\n                <ul>\r\n                  <li>请确保填写的信息真实有效，以便我们及时与您联系。</li>\r\n                  <li>举报内容需具体、清晰，避免使用模糊或不当语言。</li>\r\n                  <li>我们将在收到举报后的 3 个工作日内处理并反馈结果。</li>\r\n                </ul>\r\n              </div>\r\n              <!-- 举报人姓名 -->\r\n              <el-form-item label=\"举报人姓名\" prop=\"name\" width=\"0px\">\r\n                <el-input\r\n                    v-model=\"feedbackForm.name\"\r\n                    placeholder=\"请输入您的真实姓名\"\r\n                    clearable\r\n                ></el-input>\r\n              </el-form-item>\r\n\r\n              <!-- 举报人联系方式 -->\r\n              <el-form-item label=\"联系方式\" prop=\"phone\" width=\"0px\" class=\"mix\">\r\n                <el-input\r\n                    v-model=\"feedbackForm.phone\"\r\n                    placeholder=\"请输入您的手机号或邮箱\"\r\n                    clearable\r\n                ></el-input>\r\n              </el-form-item>\r\n\r\n              <!-- 举报内容 -->\r\n              <el-form-item label=\"举报内容\" prop=\"content\" width=\"0px\">\r\n                <el-input\r\n                    type=\"textarea\"\r\n                    v-model=\"feedbackForm.content\"\r\n                    placeholder=\"请详细描述您的问题或建议（最多200字）\"\r\n                    maxlength=\"200\"\r\n                    show-word-limit\r\n                    :rows=\"4\"\r\n                    clearable\r\n                ></el-input>\r\n              </el-form-item>\r\n\r\n              <!-- 举报按钮 -->\r\n              <el-form-item style=\"margin-left: 360px\">\r\n                <el-button type=\"danger\" @click=\"submitFeedback\">提交举报</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n\r\n          <!-- 项目留言 -->\r\n          <div v-show=\"activeTab === 'message'\">\r\n            <!-- 留言列表 -->\r\n            <div class=\"message-list\">\r\n              <div v-for=\"(message, index) in paginatedMessages\" :key=\"index\" class=\"message-item\">\r\n                <img :src=\"message.reviewerAvatar\" alt=\"头像\" class=\"message-avatar\" />\r\n                <div class=\"message-content\">\r\n                  <div class=\"message-info\">\r\n                    <span class=\"message-username\">{{ message.reviewer }}</span>\r\n                    <span class=\"message-time\">{{ message.createdAt }}</span>\r\n                  </div>\r\n                  <p class=\"message-text\">{{ message.review }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 分页 -->\r\n            <el-pagination\r\n                class=\"message-pagination\"\r\n                :current-page=\"messageCurrentPage\"\r\n                :page-size=\"messagePageSize\"\r\n                :total=\"messages.length\"\r\n                layout=\"prev, pager, next\"\r\n                @current-change=\"messageCurrentPage = $event\"\r\n            />\r\n\r\n            <!-- 留言输入框 -->\r\n            <div class=\"message-input-container\">\r\n              <el-input\r\n                  v-model=\"newMessageText\"\r\n                  type=\"textarea\"\r\n                  placeholder=\"请输入您的留言（最多20字）\"\r\n                  :rows=\"2\"\r\n                  maxlength=\"20\"\r\n                  show-word-limit\r\n                  class=\"message-input\"\r\n              ></el-input>\r\n              <el-button type=\"danger\" @click=\"submitMessage\" class=\"submit-button\">提交</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右边：推荐模块 -->\r\n      <div class=\"right-module\">\r\n        <!-- 项目推荐 -->\r\n        <div class=\"project-recommendation\">\r\n          <h2>项目推荐</h2>\r\n          <div class=\"project-list\">\r\n            <div\r\n                v-for=\"item in recommendedProjects\"\r\n                :key=\"item.id\"\r\n                class=\"project-item\"\r\n                @click=\"goToProjectDetail(item.id)\"\r\n            >\r\n              <img :src=\"item.image\" :alt=\"item.title\" class=\"project-thumbnail\" />\r\n              <div class=\"project-info\">\r\n                <h3 class=\"project-name\">{{ item.title }}</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 新闻推荐 -->\r\n        <div class=\"news-recommendation\">\r\n          <h2>新闻推荐</h2>\r\n          <ul class=\"news-list\">\r\n            <li\r\n                v-for=\"(news, index) in newsList\"\r\n                :key=\"index\"\r\n                class=\"news-item\"\r\n                @click=\"goToNewsDetail(news.id)\"\r\n            >\r\n              {{ news.title }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from 'axios';\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\n// 从 localStorage 中获取 token\r\nconst token = localStorage.getItem('token');\r\n\r\n// 配置 axios 请求头\r\naxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n\r\n// 跳转到捐赠页面\r\nconst goToDonationPage = () => {\r\n  router.push({\r\n    name: 'DonationPage',\r\n    params: { id: project.value.id },\r\n  });\r\n};\r\n\r\n// 项目数据\r\nconst project = ref({\r\n  id: '',\r\n  image: '',\r\n  title: '',\r\n  recordNumber: '',\r\n  targetAmount: '',\r\n  raisedAmount: '',\r\n  donationCount: '',\r\n  startDate: '',\r\n  endDate: '',\r\n  status: '',\r\n  details: '',\r\n  orgInfo: {\r\n    initiator: '',\r\n    receiver: '',\r\n    executor: '',\r\n  },\r\n  projectInfo: {\r\n    purpose: '',\r\n    cost: '',\r\n    surplusPlan: '',\r\n    invoiceMethod: '',\r\n    contact: '',\r\n    fundUsage: '',\r\n    beneficiaries: '',\r\n    leader: '',\r\n  },\r\n});\r\n\r\n// 切换模块\r\nconst tabs = [\r\n  { name: 'basic', label: '基本信息' },\r\n  { name: 'finance', label: '收支明细' },\r\n  { name: 'message', label: '项目留言' },\r\n  { name: 'feedback', label: '投诉反馈' },\r\n\r\n];\r\nconst activeTab = ref('basic');\r\n\r\n// 处理 tab 切换\r\nconst handleTabChange = (tabName) => {\r\n  try {\r\n    activeTab.value = tabName;\r\n  } catch (error) {\r\n    console.error('切换标签失败:', error);\r\n  }\r\n};\r\n\r\n\r\nlet globalProjectName = null;\r\n\r\n// 获取项目详情\r\nconst fetchProjectDetail = async (id) => {\r\n  try {\r\n    const response = await axios.get(`/user/projects/${id}`);\r\n    if (response.data && response.code === 200) {\r\n      const data = response.data;\r\n      data.status = checkProjectStatus(data.startDate, data.endDate);\r\n      project.value = data;\r\n\r\n      // 设置全局项目名称\r\n      globalProjectName = data.title;\r\n      console.log('项目名称:', globalProjectName); // 打印项目名称\r\n\r\n      // 调用 fetchFinanceList，这里假设它只需要项目名称作为参数\r\n      if (globalProjectName) {\r\n        await fetchFinanceList({ projectName: globalProjectName }); // 传递项目名称\r\n      } else {\r\n        console.error('项目名称为空，无法获取收支明细');\r\n      }\r\n    } else {\r\n      ElMessage.error('获取项目详情失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('请求失败:', error);\r\n    handleApiError(error); // 处理 API 错误的一个通用函数\r\n  }\r\n};\r\n\r\n// 处理 API 错误的通用函数\r\nconst handleApiError = (error) => {\r\n  if (error.response && error.response.status === 401) {\r\n    ElMessage.error('登录已过期，请重新登录');\r\n    router.push('/login');\r\n  } else {\r\n    ElMessage.error('请求失败，请检查网络');\r\n  }\r\n};\r\n\r\n// 判断项目状态\r\nconst checkProjectStatus = (startDate, endDate) => {\r\n  const currentDate = new Date();\r\n  const start = new Date(startDate);\r\n  const end = new Date(endDate);\r\n  return currentDate >= start && currentDate <= end ? '进行中' : '已结束';\r\n};\r\n\r\nconst goToProjectDetail = (projectId) => {\r\n  router.push({\r\n    name: 'ProjectDetail',\r\n    params: { id: projectId },\r\n  }).then(() => {\r\n    router.go(0); // 强制刷新页面\r\n  });\r\n};\r\n\r\n\r\nconst goToNewsDetail = (newsId) => {\r\n  router.push({\r\n    name: 'NewsDetail', // 替换为新闻详情页的路由名称\r\n    params: { id: newsId }, // 传递新闻 ID\r\n  });\r\n};\r\n\r\n// 获取推荐项目\r\nconst recommendedProjects = ref([]);\r\nconst fetchRecommendedProjects = async () => {\r\n  try {\r\n    const response = await axios.get('/user/projects/recommend');\r\n    if (response.data && response.code === 200) {\r\n      recommendedProjects.value = response.data\r\n          .sort(() => Math.random() - 0.5) // 随机排序\r\n          .slice(0, 4); // 截取前 4 个\r\n    }\r\n  } catch (error) {\r\n    console.error('获取推荐项目失败:', error);\r\n  }\r\n};\r\n\r\n// 获取新闻推荐\r\nconst newsList = ref([]);\r\nconst fetchNewsList = async () => {\r\n  try {\r\n    const response = await axios.get('/user/news/recommend');\r\n    if (response.data && response.code === 200) {\r\n      newsList.value = response.data\r\n          .sort(() => Math.random() - 0.5) // 随机排序\r\n          .slice(0, 4); // 截取前 4 个\r\n    }\r\n  } catch (error) {\r\n    console.error('获取新闻推荐失败:', error);\r\n  }\r\n};\r\n\r\n// 获取收支明细\r\nconst financeList = ref([]);\r\n// 获取收支明细\r\nconst fetchFinanceList = async (params = {}) => {\r\n  try {\r\n    // 打印请求参数\r\n    console.log('请求参数:', params);\r\n\r\n    const response = await axios.get('/user/finance-records', { params });\r\n    if (response.data && response.code === 200) {\r\n      financeList.value = response.data;\r\n    } else {\r\n      console.error('获取收支明细失败:', response.msg || '未知错误');\r\n    }\r\n  } catch (error) {\r\n    console.error('获取收支明细失败:', error);\r\n  }\r\n};\r\n\r\n// 分页相关\r\nconst pageSize = 10;\r\nconst currentPage = ref(1);\r\nconst paginatedFinanceList = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize;\r\n  const end = start + pageSize;\r\n  return financeList.value.slice(start, end);\r\n});\r\n\r\n// 搜索表单\r\nconst searchForm = ref({\r\n  username: '',\r\n  paymentMethod: '',\r\n  timeRange: [],\r\n});\r\n\r\n// 搜索方法\r\nconst handleSearch = () => {\r\n  const projectName= globalProjectName;\r\n  const { username, paymentMethod, timeRange } = searchForm.value;\r\n  const params = {\r\n    projectName, // 加入 projectName\r\n    username,\r\n    paymentMethod: paymentMethod ? parseInt(paymentMethod) : undefined,\r\n    startDate: timeRange && timeRange[0] ? formatDate(timeRange[0]) : undefined,\r\n    endDate: timeRange && timeRange[1] ? formatDate(timeRange[1]) : undefined,\r\n  };\r\n  console.log('Search Params:', params); // 打印参数\r\n  fetchFinanceList(params);\r\n};\r\n\r\n// 格式化日期\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return ''; // 如果时间戳为空，返回空字符串\r\n  const date = new Date(timestamp); // 将时间戳转换为 Date 对象\r\n  const year = date.getFullYear(); // 获取年份\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // 获取月份（补零）\r\n  const day = String(date.getDate()).padStart(2, '0'); // 获取日期（补零）\r\n  return `${year}-${month}-${day}`; // 返回格式化后的日期\r\n};\r\n\r\n// 表单数据\r\nconst feedbackForm = ref({\r\n  name: '',\r\n  phone: '',\r\n  content: '',\r\n});\r\n\r\n// 表单验证规则\r\nconst feedbackRules = {\r\n  name: [\r\n    { required: true, message: '请输入举报人姓名', trigger: 'blur' },\r\n    { min: 2, max: 10, message: '姓名长度在 2 到 10 个字符', trigger: 'blur' }\r\n  ],\r\n  phone: [\r\n    { required: true, message: '请输入联系方式', trigger: 'blur' },\r\n    { pattern: /^1[3-9]\\d{9}$|^\\w+@\\w+\\.\\w+$/, message: '请输入正确的手机号或邮箱', trigger: 'blur' }\r\n  ],\r\n  content: [\r\n    { required: true, message: '请输入举报内容', trigger: 'blur' },\r\n    { min: 10, max: 200, message: '举报内容长度在 10 到 200 个字符', trigger: 'blur' }\r\n  ]\r\n};\r\n\r\n// 表单引用\r\nconst feedbackFormRef = ref(null);\r\n\r\n// 提交举报\r\nconst submitFeedback = () => {\r\n  feedbackFormRef.value.validate((valid) => {\r\n    if (valid) {\r\n      console.log('提交的举报信息：', feedbackForm.value);\r\n\r\n      // 获取 token\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        ElMessage.error('用户未登录，请先登录');\r\n        return;\r\n      }\r\n\r\n      // 获取项目 ID\r\n      const projectId = project.value.id;\r\n\r\n      // 构造请求数据，包含项目 ID\r\n      const requestData = {\r\n        ...feedbackForm.value, // 包含表单数据\r\n        projectId, // 添加项目 ID\r\n      };\r\n\r\n      // 发送 HTTP 请求\r\n      axios.post('/user/feedback', requestData, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // 携带 token\r\n        },\r\n      })\r\n          .then(response => {\r\n            if (response.code === 200) {\r\n              ElMessage.success('举报提交成功！我们将尽快处理您的反馈。');\r\n              feedbackFormRef.value.resetFields(); // 清空表单\r\n            } else {\r\n              ElMessage.error(response.msg || '提交失败，请稍后重试');\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('提交失败:', error);\r\n            ElMessage.error('提交失败，请稍后重试');\r\n          });\r\n    } else {\r\n      ElMessage.error('请填写完整信息');\r\n    }\r\n  });\r\n};\r\n\r\n\r\n// 留言数据\r\nconst messages = ref([]);\r\n\r\n// 新留言内容\r\nconst newMessageText = ref('');\r\n\r\nconst submitMessage = async () => {\r\n  if (newMessageText.value.trim()) {\r\n    try {\r\n      // 从本地存储或状态管理中获取 token\r\n      const token = localStorage.getItem('token'); // 假设 token 存储在 localStorage 中\r\n      // 提交留言到服务器\r\n      const response = await axios.post(\r\n          '/user/project/reviews',\r\n          {\r\n            projectId: project.value.id, // 项目 ID\r\n            review: newMessageText.value, // 留言内容\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`, // 将 token 放在请求头中\r\n            },\r\n          }\r\n      );\r\n\r\n      // 如果提交成功\r\n      if (response.data && response.code === 200) {\r\n        ElMessage.success('留言提交成功！'); // 提示提交成功\r\n        newMessageText.value = ''; // 清空输入框\r\n        fetchMessages(project.value.id); // 重新获取留言列表\r\n      } else {\r\n        ElMessage.error('留言提交失败，请重试'); // 提示提交失败\r\n      }\r\n    } catch (error) {\r\n      console.error('提交留言失败:', error);\r\n      ElMessage.error('留言提交失败，请重试'); // 提示提交失败\r\n    }\r\n  } else {\r\n    ElMessage.warning('请输入留言内容'); // 提示输入内容为空\r\n  }\r\n};\r\n\r\nconst fetchMessages = async (projectId) => {\r\n  try {\r\n    const response = await axios.get(`/user/messages/${projectId}`);\r\n    if (response.data && response.code === 200) {\r\n      // 处理时间数据\r\n      const formattedMessages = response.data.map(message => {\r\n        const [year, month, day, hour, minute] = message.createdAt;\r\n        const createdAtDate = new Date(year, month - 1, day, hour, minute);\r\n        return {\r\n          ...message,\r\n          createdAt: createdAtDate.toLocaleString() // 转换为本地时间字符串\r\n        };\r\n      });\r\n\r\n      messages.value = formattedMessages;\r\n    }\r\n  } catch (error) {\r\n    console.error('获取留言失败:', error);\r\n  }\r\n};\r\n\r\n// 留言分页相关\r\nconst messagePageSize = 5; // 每页显示 5 条留言\r\nconst messageCurrentPage = ref(1); // 当前页码\r\n\r\n// 分页后的留言数据\r\nconst paginatedMessages = computed(() => {\r\n  const start = (messageCurrentPage.value - 1) * messagePageSize;\r\n  const end = start + messagePageSize;\r\n  return messages.value.slice(start, end);\r\n});\r\n\r\n// 在组件挂载时获取数据\r\nonMounted(() => {\r\n  const projectId = route.params.id;\r\n  fetchProjectDetail(projectId);\r\n  fetchRecommendedProjects();\r\n  fetchNewsList();\r\n  fetchFinanceList(); // 初始化获取收支明细\r\n  fetchMessages(projectId);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* 上方：项目详情 */\r\n.project-detail {\r\n  display: flex;\r\n  max-width: 1200px;\r\n  margin: 30px auto;\r\n  gap: 20px;\r\n  background-color: #70777d;\r\n  color: #fff;\r\n  border-radius: 8px;\r\n}\r\n\r\n.left-section {\r\n  flex: 1;\r\n  position: relative;\r\n}\r\n\r\n.project-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 500px;\r\n  border-radius: 8px;\r\n  object-fit: cover;\r\n}\r\n\r\n.status-tag {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n\r\n.status-tag.ongoing {\r\n  background-color: #ff0000;\r\n}\r\n\r\n.status-tag.ended {\r\n  background-color: #000;\r\n}\r\n\r\n.right-section {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n}\r\n\r\n.project-title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.info-item {\r\n  margin-bottom: 16px;\r\n  font-size: 16px;\r\n}\r\n\r\n.info-label {\r\n  font-weight: bold;\r\n}\r\n\r\n.info-value {\r\n  color: #ffffff;\r\n}\r\n\r\n.donate-button-container {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.donate-button {\r\n  border-radius: 20px;\r\n  background-color: #ff0000;\r\n  border: none;\r\n  color: #fff;\r\n  width: 200px;\r\n  height: 40px;\r\n  font-size: 14px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.donate-button:hover {\r\n  background-color: #cc0000;\r\n}\r\n\r\n.donate-button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* 下方：左右分栏模块 */\r\n.bottom-section {\r\n  display: flex;\r\n  max-width: 1200px;\r\n  margin: 30px auto;\r\n  gap: 20px;\r\n}\r\n\r\n.left-module {\r\n  flex: 2;\r\n  border: 1px solid #e0e0e0; /* 添加边框 */\r\n  border-radius: 8px; /* 圆角 */\r\n  overflow: hidden; /* 防止内容溢出 */\r\n}\r\n\r\n/* 切换按钮容器样式 */\r\n.tab-buttons {\r\n  display: flex;\r\n  background-color: #f5f5f5; /* 灰色背景 */\r\n  border-right: 1px solid #e0e0e0; /* 右边框 */\r\n}\r\n\r\n/* 按钮样式 */\r\n.tab-buttons .el-button {\r\n  width: 97.6px; /* 固定宽度 */\r\n  height: 40px; /* 固定高度 */\r\n  margin: 0; /* 去掉间距 */\r\n  border-radius: 0; /* 去掉圆角 */\r\n  background-color: #f5f5f5; /* 未选中时灰色背景 */\r\n  color: #909399; /* 未选中时字体颜色 */\r\n  border: none; /* 去掉默认边框 */\r\n  border-bottom: 2px solid transparent; /* 底部边框透明 */\r\n}\r\n\r\n/* 选中按钮样式 */\r\n.tab-buttons .el-button.active {\r\n  background-color: #fff; /* 选中时白色背景 */\r\n  color: #000; /* 选中时黑色字体 */\r\n  border-bottom: 2px solid #fff; /* 选中时白色底部边框 */\r\n}\r\n\r\n/* 切换内容样式 */\r\n.tab-content {\r\n  padding: 20px;\r\n  background-color: #fff; /* 白色背景 */\r\n  border-radius: 0 0 8px 8px; /* 底部圆角 */\r\n  color: #333;\r\n}\r\n\r\n.tab-content h2 {\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.tab-content p {\r\n  font-size: 16px;\r\n  line-height: 1.6;\r\n}\r\n\r\n.right-module {\r\n  flex: 1;\r\n}\r\n\r\n.project-recommendation,\r\n.news-recommendation {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.project-recommendation h2,\r\n.news-recommendation h2 {\r\n  font-size: 20px;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n  margin-top: -1px;\r\n}\r\n\r\n.project-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(1, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.project-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  border-radius: 8px;\r\n  cursor: pointer; /* 添加手指效果 */\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.project-thumbnail {\r\n  width: 140px;\r\n  height: 100px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.project-name {\r\n  font-size: 16px;\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.news-list {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.news-item {\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n  color: #6e76f9;\r\n}\r\n\r\n/* 基本信息模块样式 */\r\n.info-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.info-section h2 {\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n  color: #333;\r\n}\r\n\r\n.info-section p {\r\n  font-size: 20px;\r\n  line-height: 1.6;\r\n  color: #666;\r\n}\r\n\r\n.info-list {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.info-list li {\r\n  margin-bottom: 10px;\r\n  font-size: 16px;\r\n  line-height: 1.6;\r\n  color: #666;\r\n}\r\n\r\n.info-list strong {\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n/* 搜索表单样式 */\r\n.search-form {\r\n  margin-top: 20px;\r\n  margin-left: -40px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* 分页样式 */\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n/* 投诉反馈模块样式 */\r\n.feedback-tips {\r\n  margin-bottom: 50px;\r\n  padding: 5px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 4px;\r\n  color: #666;\r\n}\r\n\r\n.feedback-tips p {\r\n  margin-top: -2px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.feedback-tips ul {\r\n  padding-left: 20px;\r\n  margin: 0;\r\n}\r\n\r\n.feedback-tips li {\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n:deep(.el-textarea__inner){\r\n  width: 655px;\r\n  margin-left: 13px;\r\n}\r\n\r\n:deep(.mix .el-input__wrapper){\r\n  margin-left: 13px;\r\n}\r\n\r\n/* 留言列表样式 */\r\n.message-list {\r\n  max-height: 600px;\r\n  overflow-y: auto;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.message-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.message-avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  margin-right: 10px;\r\n}\r\n\r\n.message-content {\r\n  flex: 1;\r\n}\r\n\r\n.message-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.message-username {\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.message-time {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.message-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n}\r\n\r\n/* 分页样式 */\r\n.message-pagination {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n/* 留言输入框样式 */\r\n.message-input-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.message-input {\r\n  flex: 1;\r\n}\r\n\r\n.submit-button {\r\n  width: 80px;\r\n  height: 40px;\r\n}\r\n</style>\r\n","import script from \"./ProjectDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProjectDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProjectDetail.vue?vue&type=style&index=0&id=51e9c679&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-51e9c679\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"donation-page\">\r\n    <!-- Steps 步骤条 -->\r\n    <el-steps :active=\"activeStep\" finish-status=\"success\" align-center>\r\n      <el-step title=\"选择捐款项目\"/>\r\n      <el-step title=\"确认捐款信息\"/>\r\n      <el-step title=\"在线支付\"/>\r\n      <el-step title=\"完成捐款\"/>\r\n    </el-steps>\r\n\r\n    <!-- 步骤内容 -->\r\n    <div class=\"step-content\">\r\n      <!-- 第一步：选择捐款项目 -->\r\n      <div v-if=\"activeStep === 0\">\r\n        <h2>选择捐款项目</h2>\r\n        <el-radio-group v-model=\"selectedProject\">\r\n          <el-radio label=\"慈善文化进校园项目\">慈善文化进校园项目</el-radio>\r\n          <el-radio label=\"其他项目\">其他项目</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n\r\n      <!-- 第二步：确认捐款信息 -->\r\n      <div v-if=\"activeStep === 1\">\r\n        <div class=\"marking\">\r\n          请正确填写捐款人信息。标注(<span class=\"required-mark\">*</span>)为必填项目。\r\n        </div>\r\n        <el-form :model=\"donationForm\" :rules=\"rules\" ref=\"donationFormRef\">\r\n          <el-form-item label=\"捐赠金额\" prop=\"amount\" style=\"display: flex\">\r\n            <div class=\"amount-buttons\">\r\n              <el-button\r\n                  v-for=\"amount in fixedAmounts\"\r\n                  :key=\"amount\"\r\n                  :type=\"donationForm.amount === amount ? 'primary' : ''\"\r\n                  @click=\"selectAmount(amount)\"\r\n              >\r\n                {{ amount }} 元\r\n              </el-button>\r\n              <el-input\r\n                  v-model=\"donationForm.amount\"\r\n                  placeholder=\"请输入捐赠金额\"\r\n                  style=\"display: flex; align-items: center;\"\r\n              >\r\n                <template #prefix>\r\n                   <span style=\"margin-right: 8px; color: #606266; border-right: 1px solid #dcdfe6; padding-right: 8px;\">\r\n                    其他\r\n                   </span>\r\n                </template>\r\n              </el-input>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"捐赠项目\" prop=\"project\">\r\n            <el-input v-model=\"donationForm.project\" disabled/>\r\n          </el-form-item>\r\n          <el-form-item label=\"捐赠人/企业\" prop=\"donorType\">\r\n            <el-radio-group v-model=\"donationForm.donorType\">\r\n              <el-radio label=\"个人\">个人</el-radio>\r\n              <el-radio label=\"企业\">企业</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系方式\" prop=\"contact\">\r\n            <el-input v-model=\"donationForm.contact\" placeholder=\"请输入联系方式\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"付款方式\" prop=\"paymentMethod\">\r\n            <div class=\"payment-methods\">\r\n              <div\r\n                  v-for=\"method in paymentMethods\"\r\n                  :key=\"method.value\"\r\n                  :class=\"['payment-method', { active: donationForm.paymentMethod === method.value }]\"\r\n                  @click=\"selectPaymentMethod(method.value)\"\r\n              >\r\n                <img :src=\"method.image\" :alt=\"method.label\"/>\r\n              </div>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item prop=\"agreement\" style=\"margin-left: 77px;\">\r\n            <el-checkbox v-model=\"donationForm.agreement\">\r\n              我已了解并同意\r\n              <el-link type=\"primary\" :underline=\"false\" @click=\"showAgreementDialog\">\r\n                《捐赠协议》\r\n              </el-link>\r\n            </el-checkbox>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 第三步：在线支付 -->\r\n      <div v-if=\"activeStep === 2\" style=\"text-align: center;\">\r\n        <h2>在线支付</h2>\r\n        <p>请扫描以下二维码完成支付：</p>\r\n        <img\r\n            :src=\"donationForm.paymentMethod === '微信支付' ? wechatQRCode : alipayQRCode\"\r\n            alt=\"支付二维码\"\r\n            style=\"width: 200px; height: 200px\"\r\n        />\r\n        <p>支付金额：{{ donationForm.amount }} 元</p>\r\n      </div>\r\n\r\n      <!-- 第四步：完成捐款 -->\r\n      <div v-if=\"activeStep === 3\">\r\n        <el-result icon=\"success\" title=\"捐款成功\" sub-title=\"感谢您的特别捐赠！\">\r\n          <template #extra>\r\n            <p><span style=\"color:#e40000;font-weight: 700\">{{ countdown }}</span> 秒后自动返回首页</p>\r\n            <el-button type=\"primary\" @click=\"goBackToHome\">立即返回首页</el-button>\r\n          </template>\r\n        </el-result>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 操作按钮 -->\r\n    <div class=\"action-buttons\">\r\n      <el-button v-if=\"activeStep > 0 && activeStep < 3\" @click=\"prevStep\">上一步</el-button>\r\n      <el-button\r\n          v-if=\"activeStep < 3\"\r\n          type=\"primary\"\r\n          @click=\"nextStep\"\r\n          :disabled=\"activeStep === 1 && !isFormValid\"\r\n      >\r\n        下一步\r\n      </el-button>\r\n    </div>\r\n\r\n    <!-- 捐赠协议弹窗 -->\r\n    <el-dialog\r\n        v-model=\"agreementDialogVisible\"\r\n        width=\"50%\"\r\n        :before-close=\"handleClose\"\r\n    >\r\n      <h2>网上捐赠协议</h2>\r\n      <div class=\"agreement-content\">\r\n        <p><strong>声明：</strong>捐赠人对所捐赠的善款（物）持有所有权，属自愿行为。</p>\r\n        <p><strong>承诺：</strong>您所捐赠的每一份善款（物），将全额用于系统开展的公益慈善项目，无需承担网站的任何管理成本。</p>\r\n        <h3>1、捐赠来源：</h3>\r\n        <p>捐赠人捐赠的财产，是其有权处分的合法财产，且权属关系无争议。</p>\r\n        <h3>2、捐赠用途：</h3>\r\n        <p>本网站所收到的所有捐赠财产将按捐赠人要求（明确使用方向、实施项目和受益人、捐助地区）用于本机构指定项目，未经捐赠人同意，不会改变捐赠财产的用途；捐赠人未作指定要求的捐赠财产，将作为非限定捐赠用于任何需要项目。</p>\r\n        <p>捐赠7日之内可根据情况酌情调整捐赠用途，7日之后则不再变更。</p>\r\n        <h3>3、权利义务：</h3>\r\n        <p>1）、捐赠人有权向本网站查询捐赠财产的使用及管理情况，并提出意见和建议。对于捐赠人的查询，本网站会如实答复。如出现违反捐赠要求使用捐赠财产的情况，捐赠人有权要求履行捐赠要求或者撤销捐赠行为。</p>\r\n        <p>2）、捐赠人对捐赠行为、捐赠财产和其他有关事项要求保密的，本网站将予以保密。</p>\r\n        <p>3）、捐赠行为发生之后，捐赠人可向本机构索取合法、有效的捐赠凭证。</p>\r\n        <p>4）、捐赠行为发生之后，本系统将按要求与捐赠人补签捐赠协议。</p>\r\n        <h3>4、其他约定</h3>\r\n        <p>对捐赠人已捐出的捐赠财产，都视为本机构的捐赠收入，任何情况下本网站不作任何退还或返还补偿。</p>\r\n        <h3>5、法律的适用和管辖：</h3>\r\n        <p>基本声明的生效、履行、解释及争议的解决均适用中华人民共和国法律。如果本声明的任何条款因与中华人民共和国现行法律相抵触而无效，该等无效不影响其他条款的效力。</p>\r\n      </div>\r\n      <template #footer>\r\n        <el-button type=\"danger\" @click=\"agreementDialogVisible = false\">关闭</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\n\r\n// 引入本地图片\r\nimport wxImage from '@/assets/wx.png'; // 微信支付图片\r\nimport alipayImage from '@/assets/zfb.png'; // 支付宝图片\r\nimport wechatQRCodeImage from '@/assets/wechat-qrcode.png'; // 微信支付二维码\r\nimport alipayQRCodeImage from '@/assets/alipay-qrcode.png'; // 支付宝二维码\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\n// 项目 ID\r\nconst projectId = ref(route.params.id);\r\n\r\n// 当前步骤\r\nconst activeStep = ref(1); // 默认进入第二步\r\n\r\n// 捐赠表单数据\r\nconst donationForm = ref({\r\n  amount: '', // 默认金额\r\n  paymentMethod: '', // 付款方式\r\n});\r\n\r\n// 固定金额选项\r\nconst fixedAmounts = ref(['20', '50', '100']);\r\n\r\n// 支付方式选项\r\nconst paymentMethods = ref([\r\n  {\r\n    value: '微信支付',\r\n    label: '微信支付',\r\n    image: wxImage, // 使用本地图片\r\n  },\r\n  {\r\n    value: '支付宝',\r\n    label: '支付宝',\r\n    image: alipayImage, // 使用本地图片\r\n  },\r\n]);\r\n\r\n// 控制捐赠协议弹窗的显示状态\r\nconst agreementDialogVisible = ref(false);\r\n\r\n// 显示捐赠协议弹窗\r\nconst showAgreementDialog = () => {\r\n  agreementDialogVisible.value = true;\r\n};\r\n\r\n// 支付二维码图片\r\nconst wechatQRCode = wechatQRCodeImage; // 微信支付二维码\r\nconst alipayQRCode = alipayQRCodeImage; // 支付宝二维码\r\n\r\n// 表单验证规则\r\nconst rules = {\r\n  amount: [\r\n    { required: true, message: '请输入捐赠金额', trigger: 'blur' },\r\n    { pattern: /^\\d+$/, message: '请输入有效的金额', trigger: 'blur' },\r\n  ],\r\n  paymentMethod: [\r\n    { required: true, message: '请选择付款方式', trigger: 'change' },\r\n  ],\r\n};\r\n\r\n// 表单引用\r\nconst donationFormRef = ref(null);\r\n\r\n// 检查表单是否有效\r\nconst isFormValid = computed(() => {\r\n  return donationForm.value.amount && donationForm.value.paymentMethod;\r\n});\r\n\r\n// 选择金额\r\nconst selectAmount = (amount) => {\r\n  donationForm.value.amount = amount;\r\n};\r\n\r\n// 选择支付方式\r\nconst selectPaymentMethod = (method) => {\r\n  donationForm.value.paymentMethod = method;\r\n};\r\n\r\n// 获取用户坐标\r\nconst getLocation = () => {\r\n  return new Promise((resolve, reject) => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            const { latitude, longitude } = position.coords;\r\n            resolve({ latitude, longitude });\r\n          },\r\n          (error) => {\r\n            reject(error);\r\n          }\r\n      );\r\n    } else {\r\n      reject(new Error('浏览器不支持地理位置功能'));\r\n    }\r\n  });\r\n};\r\n\r\n// 提交捐款数据\r\nconst submitDonation = async () => {\r\n  try {\r\n    // 1. 获取用户坐标\r\n    const { latitude, longitude } = await getLocation();\r\n\r\n    // 2. 构造请求数据\r\n    const donationData = {\r\n      projectId: projectId.value, // 项目ID\r\n      amount: donationForm.value.amount, // 捐款金额\r\n      paymentMethod: donationForm.value.paymentMethod === '微信支付' ? 1 : 0, // 支付方式\r\n      isForeign: 0, // 默认非境外\r\n      latitude: latitude, // 纬度\r\n      longitude: longitude, // 经度\r\n    };\r\n\r\n    // 3. 发送 POST 请求\r\n    const response = await axios.post('/user/donations', donationData);\r\n\r\n    // 4. 处理响应\r\n    if (response.data && response.code === 200) {\r\n      ElMessage.success('捐款提交成功！');\r\n      activeStep.value++; // 进入第四步\r\n      startCountdown(); // 启动倒计时\r\n    } else {\r\n      ElMessage.error('捐款提交失败，请重试');\r\n    }\r\n  } catch (error) {\r\n    console.error('提交失败:', error);\r\n    if (error.response && error.response.status === 401) {\r\n      ElMessage.error('登录已过期，请重新登录');\r\n      router.push('/login');\r\n    } else {\r\n      ElMessage.error('提交失败，请检查网络');\r\n    }\r\n  }\r\n};\r\n\r\n// 倒计时\r\nconst countdown = ref(5); // 初始倒计时为 5 秒\r\nlet timer = null; // 定时器\r\n\r\n// 开始倒计时\r\nconst startCountdown = () => {\r\n  timer = setInterval(() => {\r\n    if (countdown.value > 0) {\r\n      countdown.value--;\r\n    } else {\r\n      clearInterval(timer); // 清除定时器\r\n      goBackToHome(); // 倒计时结束后跳转首页\r\n    }\r\n  }, 1000); // 每秒更新一次\r\n};\r\n\r\n// 跳转到首页\r\nconst goBackToHome = () => {\r\n  router.push('/'); // 跳转到首页\r\n};\r\n\r\n// 在组件卸载时清除定时器\r\nonUnmounted(() => {\r\n  if (timer) {\r\n    clearInterval(timer);\r\n  }\r\n});\r\n\r\n// 下一步\r\nconst nextStep = async () => {\r\n  if (activeStep.value === 1) {\r\n    // 在第二步时验证表单\r\n    donationFormRef.value.validate((valid) => {\r\n      if (valid) {\r\n        activeStep.value++;\r\n      } else {\r\n        console.log('表单验证失败');\r\n      }\r\n    });\r\n  } else if (activeStep.value === 2) {\r\n    // 在第三步时提交数据\r\n    await submitDonation();\r\n  } else {\r\n    activeStep.value++;\r\n  }\r\n};\r\n\r\n// 上一步\r\nconst prevStep = () => {\r\n  if (activeStep.value > 0) {\r\n    activeStep.value--;\r\n  }\r\n};\r\n\r\n// 获取项目详情\r\nconst fetchProjectDetail = async (id) => {\r\n  try {\r\n    const response = await axios.get(`/user/projects/${id}`);\r\n    if (response.data && response.code === 200) {\r\n      const data = response.data;\r\n      // 将项目名称填入表单\r\n      donationForm.value.project = data.title;\r\n    } else {\r\n      ElMessage.error('获取项目详情失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('请求失败:', error);\r\n    if (error.response && error.response.status === 401) {\r\n      ElMessage.error('登录已过期，请重新登录');\r\n      router.push('/login');\r\n    } else {\r\n      ElMessage.error('请求失败，请检查网络');\r\n    }\r\n  }\r\n};\r\n\r\n// 在组件挂载时获取项目详情\r\nonMounted(() => {\r\n  fetchProjectDetail(projectId.value);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.donation-page {\r\n  max-width: 760px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.step-content {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.action-buttons {\r\n  margin-top: 20px;\r\n}\r\n\r\n\r\n.marking {\r\n  text-align: center;\r\n  margin: 20px;\r\n  border: 1px solid #cccc;\r\n  padding: 15px;\r\n}\r\n\r\n.required-mark {\r\n  color: red;\r\n}\r\n\r\n.amount-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.payment-methods {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.payment-method {\r\n  height: 40px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  padding: 0 20px;\r\n  text-align: center;\r\n}\r\n\r\n.payment-method.active {\r\n  border-color: #409eff;\r\n  background-color: #f0f7ff;\r\n}\r\n\r\n.payment-method img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.agreement-content {\r\n  text-align: left;\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n  line-height: 1.6;\r\n}\r\n</style>\r\n","import script from \"./DonationPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DonationPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DonationPage.vue?vue&type=style&index=0&id=1ac88768&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1ac88768\"]])\n\nexport default __exports__","// src/api/api.js\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:8080', // 后端 API 地址\r\n    timeout: 5000, // 请求超时时间\r\n});\r\n\r\nexport default api;\r\n","<template>\r\n  <div class=\"container\">\r\n    <!-- 左侧四分之一圆圈和图片 -->\r\n    <div class=\"circle-container\">\r\n      <div class=\"circle\">\r\n        <img src=\"@/assets/login.png\" alt=\"登录图片\" class=\"image\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 右侧登录/注册表单 -->\r\n    <div class=\"forms-container\">\r\n      <!-- 登录表单 -->\r\n      <form v-if=\"isLogin\" class=\"sign-in-form\" @submit.prevent=\"handleLogin\">\r\n        <h2 class=\"title\">登录</h2>\r\n        <div class=\"input-field\">\r\n          <img src=\"@/assets/username.png\" alt=\"用户图标\" class=\"icon\" />\r\n          <input type=\"text\" placeholder=\"用户名\" v-model=\"loginUsername\" />\r\n        </div>\r\n        <div class=\"input-field\">\r\n          <img src=\"@/assets/password.png\" alt=\"密码图标\" class=\"icon\" />\r\n          <input type=\"password\" placeholder=\"密码\" v-model=\"loginPassword\" />\r\n        </div>\r\n        <input type=\"submit\" value=\"立即登录\" class=\"btn solid\" />\r\n        <p class=\"toggle-text\">\r\n          没有账号？\r\n          <span class=\"toggle-link\" @click=\"toggleForm\">立即注册</span>\r\n        </p>\r\n      </form>\r\n\r\n      <!-- 注册表单 -->\r\n      <form v-else class=\"sign-up-form\" @submit.prevent=\"handleRegister\">\r\n        <h2 class=\"title\">注册</h2>\r\n        <div class=\"input-field\">\r\n          <img src=\"@/assets/username.png\" alt=\"用户图标\" class=\"icon\" />\r\n          <input type=\"text\" placeholder=\"用户名\" v-model=\"registerUsername\" />\r\n        </div>\r\n        <div class=\"input-field\">\r\n          <img src=\"@/assets/password.png\" alt=\"密码图标\" class=\"icon\" />\r\n          <input type=\"password\" placeholder=\"密码\" v-model=\"registerPassword\" />\r\n        </div>\r\n        <div class=\"input-field\">\r\n          <img src=\"@/assets/password.png\" alt=\"确认密码图标\" class=\"icon\" />\r\n          <input type=\"password\" placeholder=\"确认密码\" v-model=\"confirmPassword\" />\r\n        </div>\r\n        <input type=\"submit\" value=\"立即注册\" class=\"btn solid\" />\r\n        <p class=\"toggle-text\">\r\n          已有账号？\r\n          <span class=\"toggle-link\" @click=\"toggleForm\">立即登录</span>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElNotification } from 'element-plus';\r\nimport api from '@/api/api';\r\nimport { getCurrentInstance } from 'vue';\r\n\r\n// 获取当前组件实例\r\n// eslint-disable-next-line no-unused-vars\r\nconst { proxy } = getCurrentInstance();\r\n\r\nconst router = useRouter();\r\n\r\n// 控制登录/注册界面切换\r\nconst isLogin = ref(true);\r\n\r\n// 登录表单数据\r\nconst loginUsername = ref('');\r\nconst loginPassword = ref('');\r\n\r\n// 注册表单数据\r\nconst registerUsername = ref('');\r\nconst registerPassword = ref('');\r\nconst confirmPassword = ref('');\r\n\r\n// 处理登录\r\nconst handleLogin = async () => {\r\n  // 检查用户名和密码是否为空\r\n  if (!loginUsername.value || !loginPassword.value) {\r\n    ElNotification({\r\n      title: '提示',\r\n      message: '请输入用户名和密码',\r\n      type: 'warning',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // 发起登录请求\r\n    const response = await api.post('/user/login', {\r\n      username: loginUsername.value,\r\n      password: loginPassword.value,\r\n    });\r\n\r\n    // 登录成功\r\n    if (response.data.code === 200) {\r\n      const { token, isBanned , uuid} = response.data.data;\r\n\r\n      // 将 isBanned 转换为数字类型\r\n      const isBannedNumber = Number(isBanned);\r\n\r\n      // 检查用户是否被封禁\r\n      if (isBannedNumber === 1) {\r\n        ElNotification({\r\n          title: '警告',\r\n          message: '您的账号已被封禁，请联系管理员',\r\n          type: 'warning',\r\n          position: 'top-right',\r\n          duration: 5000, // 提示时间稍长\r\n        });\r\n        return; // 停止后续逻辑\r\n      }\r\n\r\n      // 保存 token 到本地存储\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('uuid', uuid);\r\n\r\n      // 连接 WebSocket，uuid 写死为 12138\r\n      proxy.$connectWebSocket('ws://localhost:8080/websocket', uuid);\r\n\r\n      // 登录成功，跳转到首页\r\n      await router.push('/');\r\n      ElNotification({\r\n        title: '成功',\r\n        message: '登录成功！',\r\n        type: 'success',\r\n        position: 'top-right',\r\n        duration: 1000,\r\n      });\r\n    } else {\r\n      // 登录失败\r\n      ElNotification({\r\n        title: '错误',\r\n        message: response.data.msg || '登录失败',\r\n        type: 'error',\r\n        position: 'top-right',\r\n        duration: 3000,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    // 网络错误\r\n    ElNotification({\r\n      title: '网络错误',\r\n      message: '请稍后重试',\r\n      type: 'error',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n  }\r\n};\r\n\r\n// 处理注册\r\nconst handleRegister = async () => {\r\n  // 验证输入\r\n  if (!registerUsername.value || !registerPassword.value || !confirmPassword.value) {\r\n    ElNotification({\r\n      title: '提示',\r\n      message: '请填写所有字段',\r\n      type: 'warning',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n    return;\r\n  }\r\n\r\n  // 验证账号是否为纯数字的九位数\r\n  const usernameRegex = /^\\d{10}$/;\r\n  if (!usernameRegex.test(registerUsername.value)) {\r\n    ElNotification({\r\n      title: '提示',\r\n      message: '账号必须是纯数字的十位数',\r\n      type: 'warning',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n    return;\r\n  }\r\n\r\n  // 验证密码是否为字母和数字的组合\r\n  const passwordRegex = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/;\r\n  if (!passwordRegex.test(registerPassword.value)) {\r\n    ElNotification({\r\n      title: '提示',\r\n      message: '密码必须是字母和数字的组合，且至少8位',\r\n      type: 'warning',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n    return;\r\n  }\r\n\r\n  // 验证密码和确认密码是否一致\r\n  if (registerPassword.value !== confirmPassword.value) {\r\n    ElNotification({\r\n      title: '提示',\r\n      message: '两次输入的密码不一致',\r\n      type: 'warning',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // 发起注册请求\r\n    const response = await api.post('/user/register', {\r\n      username: registerUsername.value,\r\n      password: registerPassword.value,\r\n    });\r\n    // 注册成功\r\n    if (response.data.code === 200) {\r\n      ElNotification({\r\n        title: '成功',\r\n        message: '注册成功！',\r\n        type: 'success',\r\n        position: 'top-right',\r\n        duration: 3000,\r\n      });\r\n\r\n      // 清空注册表单\r\n      registerUsername.value = '';\r\n      registerPassword.value = '';\r\n      confirmPassword.value = '';\r\n\r\n      // 切换回登录表单\r\n      isLogin.value = true;\r\n    } else {\r\n      // 注册失败\r\n      ElNotification({\r\n        title: '错误',\r\n        message: response.data.msg || '注册失败',\r\n        type: 'error',\r\n        position: 'top-right',\r\n        duration: 3000,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    // 请求失败\r\n    ElNotification({\r\n      title: '错误',\r\n      message: '网络错误，请稍后重试',\r\n      type: 'error',\r\n      position: 'top-right',\r\n      duration: 3000,\r\n    });\r\n  }\r\n};\r\n\r\n// 切换登录/注册表单\r\nconst toggleForm = () => {\r\n  isLogin.value = !isLogin.value;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 引入字体 */\r\n@import url(\"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap\");\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody,\r\ninput {\r\n  font-family: \"Poppins\", sans-serif;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 左侧四分之一圆圈容器 */\r\n.circle-container {\r\n  flex: 1;\r\n  position: relative;\r\n  background: linear-gradient(-45deg, #ff4b4b 0%, #ff7f7f 100%);\r\n  clip-path: ellipse(100% 100% at 0% 50%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* 圆圈 */\r\n.circle {\r\n  width: 80%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* 图片 */\r\n.image {\r\n  width: 100%;\r\n}\r\n\r\n/* 右侧登录/注册表单容器 */\r\n.forms-container {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n}\r\n\r\n/* 表单样式 */\r\nform {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 40px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n  background-color: #fff;\r\n}\r\n\r\n/* 标题 */\r\n.title {\r\n  font-size: 2.2rem;\r\n  color: #444;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* 输入框 */\r\n.input-field {\r\n  width: 100%;\r\n  background-color: #f0f0f0;\r\n  margin: 10px 0;\r\n  height: 55px;\r\n  border-radius: 55px;\r\n  display: grid;\r\n  grid-template-columns: 15% 85%;\r\n  padding: 0 0.4rem;\r\n  position: relative;\r\n}\r\n\r\n.input-field .icon {\r\n  width: 30px;\r\n  height: 30px;\r\n  margin-top: 12px;\r\n  margin-left: 15px;\r\n}\r\n\r\n.input-field input {\r\n  background: none;\r\n  outline: none;\r\n  border: none;\r\n  line-height: 1;\r\n  font-weight: 600;\r\n  font-size: 1.1rem;\r\n  color: #333;\r\n}\r\n\r\n.input-field input::placeholder {\r\n  color: #aaa;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 按钮 */\r\n.btn {\r\n  width: 100%;\r\n  background-color: #ff4b4b; /* 红色按钮 */\r\n  border: none;\r\n  outline: none;\r\n  height: 49px;\r\n  border-radius: 49px;\r\n  color: #fff;\r\n  text-transform: uppercase;\r\n  font-weight: 600;\r\n  margin: 10px 0;\r\n  cursor: pointer;\r\n  transition: 0.5s;\r\n}\r\n\r\n.btn:hover {\r\n  background-color: #e63c3c; /* 深红色悬停效果 */\r\n}\r\n\r\n/* 切换文本 */\r\n.toggle-text {\r\n  margin-top: 10px;\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.toggle-link {\r\n  color: #ff4b4b;\r\n  cursor: pointer;\r\n  text-decoration: underline;\r\n}\r\n\r\n.toggle-link:hover {\r\n  color: #e63c3c;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .container {\r\n    flex-direction: column; /* 改为垂直布局 */\r\n  }\r\n\r\n  .circle-container {\r\n    flex: none; /* 取消 flex 占据的空间 */\r\n    height: 200px; /* 设置固定高度 */\r\n    clip-path: ellipse(100% 100% at 50% 0%); /* 圆圈移动到顶部 */\r\n    border-radius: 0 0 50% 50%; /* 底部圆角 */\r\n  }\r\n\r\n  .circle {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .image {\r\n    width: 80%;\r\n    max-width: 200px; /* 限制图片大小 */\r\n  }\r\n\r\n  .forms-container {\r\n    flex: 1;\r\n    padding: 20px;\r\n  }\r\n\r\n  form {\r\n    padding: 20px; /* 减少内边距 */\r\n  }\r\n\r\n  .title {\r\n    font-size: 1.8rem; /* 缩小标题 */\r\n  }\r\n}\r\n</style>\r\n","import script from \"./LoginRegister.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginRegister.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginRegister.vue?vue&type=style&index=0&id=a70ef13a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a70ef13a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"news-detail\">\r\n    <!-- 标题 -->\r\n    <h2 class=\"news-title\">{{ newsDetail.title }}</h2>\r\n\r\n    <!-- 发布信息 -->\r\n    <div class=\"news-meta\">\r\n      <span class=\"publish-time\">发布时间：{{ newsDetail.date }}</span>\r\n      <span class=\"publisher\">发布者：{{ newsDetail.publisher }}</span>\r\n    </div>\r\n\r\n    <!-- 内容 -->\r\n    <div class=\"news-content\" v-html=\"newsDetail.content\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\n\r\nconst route = useRoute();\r\nconst newsId = route.params.id; // 获取路由中的 id 参数\r\n\r\n// 新闻详情数据\r\nconst newsDetail = ref({\r\n  title: '',\r\n  date: '',\r\n  publisher: '',\r\n  content: '',\r\n});\r\n\r\n// 格式化日期\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return '';\r\n  const date = new Date(timestamp);\r\n  return date.toLocaleDateString(); // 根据本地化格式显示日期\r\n};\r\n\r\n// 获取新闻详情数据\r\n// 获取新闻详情数据\r\nconst fetchNewsDetail = async () => {\r\n  try {\r\n    const response = await axios.get('/user/news/detail', {\r\n      params: { id: newsId }, // 传递 id 参数\r\n    });\r\n    if (response.code === 200) {\r\n      // 绑定数据，并格式化日期\r\n      newsDetail.value = {\r\n        ...response.data,\r\n        date: formatDate(response.data.date), // 格式化时间戳\r\n      };\r\n    } else {\r\n      console.error('获取新闻详情失败:', response.msg);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取新闻详情失败:', error);\r\n  }\r\n};\r\n\r\n// 组件挂载时获取数据\r\nonMounted(() => {\r\n  fetchNewsDetail();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.news-detail {\r\n  max-width: 925px;\r\n  margin: 0 auto;\r\n  text-align: left;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n}\r\n\r\n.news-title {\r\n  font-size: 20px;\r\n  color: #333;\r\n  text-align: center;\r\n  line-height: 50px;\r\n  border-bottom: 1px solid #e5e5e5;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.news-meta {\r\n  margin-left: 290px;\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.publish-time {\r\n  margin-right: 16px;\r\n}\r\n\r\n.news-content {\r\n  font-size: 16px;\r\n  line-height: 1.6;\r\n  color: #444;\r\n}\r\n\r\n.news-content img {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 8px;\r\n  margin: 10px 0;\r\n}\r\n\r\n.news-content ul {\r\n  padding-left: 20px;\r\n  margin: 10px 0;\r\n}\r\n\r\n.news-content li {\r\n  margin-bottom: 8px;\r\n}\r\n</style>\r\n","import script from \"./NewsDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewsDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NewsDetail.vue?vue&type=style&index=0&id=44fef66e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-44fef66e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"projects-page\">\r\n    <!-- 标签分类 -->\r\n    <div class=\"tags-container\">\r\n      <div class=\"tags\">\r\n        <div\r\n            v-for=\"(tag, index) in tags\"\r\n            :key=\"index\"\r\n            class=\"tag\"\r\n            :class=\"{ active: activeTag === tag }\"\r\n            @click=\"setActiveTag(tag)\"\r\n            @mouseenter=\"hoverTag = tag\"\r\n            @mouseleave=\"hoverTag = null\"\r\n        >\r\n          {{ tag }}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 搜索框 -->\r\n      <div class=\"search-box\">\r\n        <input\r\n            type=\"text\"\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"请输入项目关键字\"\r\n        />\r\n        <button @click=\"handleSearch\">搜索</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 项目列表 -->\r\n    <div class=\"project-list\">\r\n      <div\r\n          v-for=\"project in paginatedProjects\"\r\n          :key=\"project.id\"\r\n          class=\"project-item\"\r\n          @click=\"goToProjectDetail(project.id)\"\r\n      >\r\n        <img :src=\"project.image\" :alt=\"project.title\" class=\"project-image\" />\r\n        <div class=\"project-info\">\r\n          <div class=\"project-header\">\r\n            <h2>{{ project.title }}</h2>\r\n            <button @click.stop=\"goToDonationPage(project.id)\">我要捐款</button>\r\n          </div>\r\n          <div class=\"project-meta\">\r\n            <div class=\"meta-item\">\r\n              <span class=\"meta-label\">已筹金额：</span>\r\n              <span class=\"meta-value\" style=\"color: #d32f2f;font-weight: 700;font-size: 20px;margin-top: -5px\">￥{{ project.raisedAmount }}</span>元\r\n            </div>\r\n            <div class=\"meta-item\">\r\n              <span class=\"meta-label\">爱心人次：</span>\r\n              <span class=\"meta-value\">{{ project.donationCount }} 次</span>\r\n            </div>\r\n            <div class=\"meta-item\">\r\n              <span class=\"meta-label\">项目类别：</span>\r\n              <span class=\"meta-value\">{{ getCategoryName(project.category) }}</span>\r\n            </div>\r\n            <div class=\"meta-item\">\r\n              <span class=\"meta-label\">有效期：</span>\r\n              <span class=\"meta-value\">{{ formatDate(project.startDate) }} 至 {{ formatDate(project.endDate) }}</span>\r\n            </div>\r\n          </div>\r\n          <p class=\"project-description\">{{ project.details }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 分页 -->\r\n    <div class=\"pagination\">\r\n      <button\r\n          :disabled=\"currentPage === 1\"\r\n          @click=\"goToPage(1)\"\r\n      >\r\n        第一页\r\n      </button>\r\n      <button\r\n          :disabled=\"currentPage === 1\"\r\n          @click=\"goToPage(currentPage - 1)\"\r\n      >\r\n        上一页\r\n      </button>\r\n      <button\r\n          v-for=\"page in visiblePages\"\r\n          :key=\"page\"\r\n          :class=\"{ active: currentPage === page }\"\r\n          @click=\"goToPage(page)\"\r\n      >\r\n        {{ page }}\r\n      </button>\r\n      <button\r\n          :disabled=\"currentPage === totalPages\"\r\n          @click=\"goToPage(currentPage + 1)\"\r\n      >\r\n        下一页\r\n      </button>\r\n      <button\r\n          :disabled=\"currentPage === totalPages\"\r\n          @click=\"goToPage(totalPages)\"\r\n      >\r\n        最后一页\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport { ElNotification } from 'element-plus';\r\n\r\nconst router = useRouter();\r\n\r\n// 标签分类\r\nconst tags = ref([\r\n  '全部',\r\n  '扶贫济困',\r\n  '健康医疗',\r\n  '助老扶幼',\r\n  '文化教育',\r\n  '社会服务',\r\n  '科技环保',\r\n  '灾难救助',\r\n  '专项基金',\r\n]);\r\n\r\n// 当前选中的标签\r\nconst activeTag = ref('全部');\r\n\r\n// 鼠标悬浮的标签\r\nconst hoverTag = ref(null);\r\n\r\n// 搜索关键字\r\nconst searchQuery = ref('');\r\n\r\n// 是否触发搜索\r\nconst isSearchTriggered = ref(false);\r\n\r\n// 当前页码\r\nconst currentPage = ref(1);\r\n\r\n// 每页显示的项目数量\r\nconst itemsPerPage = 5;\r\n\r\n// 慈善项目数据\r\nconst charityProjects = ref([]);\r\n\r\n// 分类映射\r\nconst categoryMap = {\r\n  0: '扶贫济困',\r\n  1: '健康医疗',\r\n  2: '助老扶幼',\r\n  3: '文化教育',\r\n  4: '社会服务',\r\n  5: '科技环保',\r\n  6: '灾难救助',\r\n  7: '专项基金',\r\n};\r\n\r\n// 获取分类名称\r\nconst getCategoryName = (category) => {\r\n  return categoryMap[category] || '未知分类';\r\n};\r\n\r\n// 格式化日期\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return ''; // 如果时间戳为空，返回空字符串\r\n  const date = new Date(timestamp); // 将时间戳转换为 Date 对象\r\n  const year = date.getFullYear(); // 获取年份\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // 获取月份（补零）\r\n  const day = String(date.getDate()).padStart(2, '0'); // 获取日期（补零）\r\n  return `${year}-${month}-${day}`; // 返回格式化后的日期\r\n};\r\n\r\n// 从后端获取项目数据\r\nconst fetchProjects = async () => {\r\n  const token = localStorage.getItem('token'); // 从本地存储获取令牌\r\n  if (!token) {\r\n    ElNotification({\r\n      title: '未登录',\r\n      message: '请先登录以访问此功能',\r\n      type: 'warning',\r\n      duration: 3000,\r\n    });\r\n    await router.push('/login-register'); // 跳转到登录界面\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const response = await axios.get('/user/projects', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`, // 在请求头中携带令牌\r\n      },\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      charityProjects.value = response.data; // 更新项目数据\r\n    } else {\r\n      ElNotification({\r\n        title: '获取数据失败',\r\n        message: response.msg || '未知错误',\r\n        type: 'error',\r\n        duration: 3000,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    ElNotification({\r\n      title: '请求失败',\r\n      message: error.message || '网络错误',\r\n      type: 'error',\r\n      duration: 3000,\r\n    });\r\n  }\r\n};\r\n\r\n// 组件挂载时获取数据\r\nonMounted(() => {\r\n  fetchProjects();\r\n});\r\n\r\n// 根据选中的标签和搜索关键字过滤项目\r\nconst filteredProjects = computed(() => {\r\n  let filtered = charityProjects.value;\r\n\r\n  // 根据标签过滤\r\n  if (activeTag.value !== '全部') {\r\n    filtered = filtered.filter(\r\n        (project) => getCategoryName(project.category) === activeTag.value\r\n    );\r\n  }\r\n\r\n  // 根据搜索关键字过滤\r\n  if (isSearchTriggered.value && searchQuery.value) {\r\n    const query = searchQuery.value.toLowerCase();\r\n    filtered = filtered.filter(\r\n        (project) =>\r\n            project.title.toLowerCase().includes(query) ||\r\n            project.details.toLowerCase().includes(query)\r\n    );\r\n  }\r\n\r\n  return filtered;\r\n});\r\n\r\n// 分页后的项目数据\r\nconst paginatedProjects = computed(() => {\r\n  const start = (currentPage.value - 1) * itemsPerPage;\r\n  const end = start + itemsPerPage;\r\n  return filteredProjects.value.slice(start, end);\r\n});\r\n\r\n// 总页数\r\nconst totalPages = computed(() => {\r\n  return Math.ceil(filteredProjects.value.length / itemsPerPage);\r\n});\r\n\r\n// 可见的页码（最多显示 5 个页码）\r\nconst visiblePages = computed(() => {\r\n  const pages = [];\r\n  const maxVisiblePages = 5;\r\n  let startPage = Math.max(1, currentPage.value - Math.floor(maxVisiblePages / 2));\r\n  let endPage = Math.min(totalPages.value, startPage + maxVisiblePages - 1);\r\n\r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n  }\r\n\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return pages;\r\n});\r\n\r\n// 设置当前选中的标签\r\nconst setActiveTag = (tag) => {\r\n  activeTag.value = tag;\r\n  isSearchTriggered.value = false;\r\n  currentPage.value = 1;\r\n};\r\n\r\n// 处理搜索\r\nconst handleSearch = () => {\r\n  isSearchTriggered.value = true;\r\n  currentPage.value = 1;\r\n};\r\n\r\n// 跳转到指定页码\r\nconst goToPage = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n// 跳转到项目详情页\r\nconst goToProjectDetail = (projectId) => {\r\n  router.push({ path: `/project/${projectId}` });\r\n};\r\n\r\n// 跳转到捐赠页\r\nconst goToDonationPage = (projectId) => {\r\n  router.push({ path: `/donation/${projectId}` });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.projects-page {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  color: #666;\r\n}\r\n\r\n/* 标签容器 */\r\n.tags-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n\r\n/* 标签分类样式 */\r\n.tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.tag {\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n  color: #666;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.tag:hover,\r\n.tag.active {\r\n  background-color: #e40000;\r\n  color: #fff;\r\n}\r\n\r\n/* 搜索框样式 */\r\n.search-box {\r\n  margin-left: 700px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  width: 100%;\r\n  max-width: 400px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.search-box input {\r\n  flex: 1;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  outline: none;\r\n  transition: border-color 0.3s ease;\r\n}\r\n\r\n.search-box input:focus {\r\n  border-color: #e40000;\r\n}\r\n\r\n.search-box button {\r\n  padding: 10px 20px;\r\n  background-color: #e40000;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.search-box button:hover {\r\n  background-color: #c40000;\r\n}\r\n\r\n/* 项目列表样式 */\r\n.project-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.project-item {\r\n  display: flex;\r\n  gap: 20px;\r\n  padding: 20px;\r\n  border-bottom: 1px solid #ccc;\r\n  transition: all 0.3s ease; /* 添加过渡效果 */\r\n}\r\n\r\n\r\n/* 鼠标悬停时，图片放大 */\r\n.project-item:hover .project-image {\r\n  transform: scale(1.04); /* 图片放大 1.1 倍 */\r\n  transition: transform 0.3s ease; /* 添加过渡效果 */\r\n}\r\n\r\n/* 鼠标悬停时，标题和按钮变为红色 */\r\n.project-item:hover .project-header h2 {\r\n  color: #e40000; /* 标题变为红色 */\r\n}\r\n\r\n.project-item:hover .project-header button {\r\n  background-color: #e40000; /* 按钮背景变为红色 */\r\n  color: #fff; /* 按钮文字变为白色 */\r\n}\r\n\r\n.project-image {\r\n  width: 380px;\r\n  height: 210px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  transition: transform 0.3s ease; /* 添加过渡效果 */\r\n  overflow: hidden; /* 防止图片放大时溢出 */\r\n}\r\n\r\n.project-info {\r\n  flex: 1;\r\n}\r\n\r\n.project-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.project-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n  transition: color 0.3s ease; /* 添加过渡效果 */\r\n}\r\n\r\n.project-header button {\r\n  padding: 8px 16px;\r\n  background-color: #e40000;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.project-header button:hover {\r\n  background-color: #c40000;\r\n}\r\n\r\n.project-meta {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.meta-item {\r\n  display: flex;\r\n  gap: 5px;\r\n  color: #666;\r\n}\r\n\r\n.meta-label {\r\n  color: #666;\r\n}\r\n\r\n.meta-value {\r\n  color: #666;\r\n}\r\n\r\n.project-description {\r\n  color: #666;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n/* 分页样式 */\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination button {\r\n  padding: 8px 16px;\r\n  background-color: #f5f5f5;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.pagination button.active {\r\n  background-color: #e40000;\r\n  color: #fff;\r\n  border-color: #e40000;\r\n}\r\n\r\n.pagination button:hover {\r\n  background-color: #e40000;\r\n  color: #fff;\r\n}\r\n\r\n.pagination button:disabled {\r\n  background-color: #ddd;\r\n  color: #999;\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n","import script from \"./ProjectsPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProjectsPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProjectsPage.vue?vue&type=style&index=0&id=7d71e6cb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d71e6cb\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"news-page\">\r\n    <!-- 左边侧边栏 -->\r\n    <div class=\"sidebar\">\r\n      <div class=\"leftNavBar\">新闻资讯</div>\r\n      <ul>\r\n        <li\r\n            :class=\"{ active: currentCategory === '全部' }\"\r\n            @click=\"switchCategory('全部')\"\r\n        >\r\n          总会资讯\r\n        </li>\r\n        <li\r\n            v-for=\"category in categories\"\r\n            :key=\"category.value\"\r\n            :class=\"{ active: currentCategory === category.value }\"\r\n            @click=\"switchCategory(category.value)\"\r\n        >\r\n          {{ category.label }}\r\n        </li>\r\n      </ul>\r\n      <div class=\"leftNavBar\">项目推荐</div>\r\n      <ul class=\"project-list\">\r\n        <li\r\n            v-for=\"project in randomProjects\"\r\n            :key=\"project.id\"\r\n            class=\"project-item\"\r\n            @click=\"goToProjectDetail(project.id)\"\r\n        >\r\n          <img :src=\"project.image\" alt=\"项目图片\" class=\"project-image\" />\r\n          <div class=\"project-title\">{{ project.title }}</div>\r\n        </li>\r\n      </ul>\r\n      <div class=\"wechat-qr\">\r\n        <img src=\"@/assets/wx_user.png\" alt=\"微信二维码\" />\r\n        <p>欢迎关注心阳捐赠网官方微信</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 右边新闻列表 -->\r\n    <div class=\"main-content\">\r\n      <!-- 搜索栏 -->\r\n      <div class=\"search-bar\">\r\n        <input\r\n            type=\"text\"\r\n            v-model=\"searchKeyword\"\r\n            placeholder=\"请输入新闻标题关键字\"\r\n            class=\"search-input\"\r\n        />\r\n        <button class=\"search-button\" @click=\"searchNews\">查找</button>\r\n      </div>\r\n\r\n      <div class=\"news-list\">\r\n        <div\r\n            v-for=\"newsItem in paginatedNews\"\r\n            :key=\"newsItem.id\"\r\n            class=\"news-item\"\r\n            @click=\"goToNewsDetail(newsItem.id)\"\r\n        >\r\n          <img :src=\"newsItem.coverUrl\" alt=\"新闻封面\" class=\"news-cover\" />\r\n          <div class=\"news-content\">\r\n            <div\r\n                class=\"news-title\"\r\n                @mouseover=\"hoverTitle(newsItem.id)\"\r\n                @mouseleave=\"resetTitle\"\r\n                :class=\"{ hovered: hoveredTitleId === newsItem.id }\"\r\n            >\r\n              {{ newsItem.title }}\r\n            </div>\r\n            <div class=\"news-meta\">\r\n              <span class=\"news-date\">{{ formatDate(newsItem.date) }}</span>\r\n              <span class=\"news-publisher\">发布者：{{ newsItem.publisher }}</span>\r\n            </div>\r\n            <p v-html=\"truncateContent(newsItem.content)\"></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <button @click=\"goToFirstPage\" :disabled=\"currentPage === 1\">首页</button>\r\n        <button @click=\"prevPage\" :disabled=\"currentPage === 1\">上一页</button>\r\n        <span>第 {{ currentPage }} 页 / 共 {{ totalPages }} 页</span>\r\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">下一页</button>\r\n        <button @click=\"goToLastPage\" :disabled=\"currentPage === totalPages\">尾页</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport axios from 'axios';\r\n\r\nconst router = useRouter();\r\nconst token = ref(localStorage.getItem('token'));\r\n\r\n// 新闻分类\r\nconst categories = [\r\n  { label: \"通知公告\", value: \"通知公告\" },\r\n  { label: \"媒体报道\", value: \"媒体报道\" },\r\n  { label: \"慈善人物\", value: \"慈善人物\" },\r\n];\r\n\r\n// 当前选中的分类，默认选中“全部”\r\nconst currentCategory = ref(\"全部\");\r\n\r\n// 搜索关键字\r\nconst searchKeyword = ref(\"\");\r\n\r\n// 是否触发搜索\r\nconst isSearchTriggered = ref(false);\r\n\r\n// 鼠标悬浮的标题ID\r\nconst hoveredTitleId = ref(null);\r\n\r\n// 新闻数据\r\nconst news = ref([]);\r\n\r\n// 慈善项目数据\r\nconst charityProjects = ref([]);\r\n\r\n// 获取新闻列表数据\r\nconst fetchNews = async () => {\r\n  try {\r\n    const response = await axios.get('/user/news', {\r\n      headers: {\r\n        Authorization: `Bearer ${token.value}`\r\n      }\r\n    });\r\n    news.value = response.data;\r\n  } catch (error) {\r\n    console.error('获取新闻数据失败:', error);\r\n  }\r\n};\r\n\r\n// 获取项目推荐数据\r\nconst fetchProjects = async () => {\r\n  try {\r\n    const response = await axios.get('/user/projects/recommend', {\r\n      headers: {\r\n        Authorization: `Bearer ${token.value}`\r\n      }\r\n    });\r\n    charityProjects.value = response.data;\r\n  } catch (error) {\r\n    console.error('获取项目数据失败:', error);\r\n  }\r\n};\r\n\r\n// 在组件挂载时调用\r\nonMounted(() => {\r\n  fetchNews();\r\n  fetchProjects();\r\n});\r\n\r\n// 随机选取 4 个项目\r\nconst randomProjects = computed(() => {\r\n  // eslint-disable-next-line vue/no-side-effects-in-computed-properties\r\n  const shuffled = charityProjects.value.sort(() => 0.5 - Math.random());\r\n  return shuffled.slice(0, 4);\r\n});\r\n\r\n// 格式化日期\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return ''; // 如果时间戳为空，返回空字符串\r\n  const date = new Date(timestamp); // 将时间戳转换为 Date 对象\r\n  const year = date.getFullYear(); // 获取年份\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // 获取月份（补零）\r\n  const day = String(date.getDate()).padStart(2, '0'); // 获取日期（补零）\r\n  return `${year}-${month}-${day}`; // 返回格式化后的日期\r\n};\r\n\r\n// 根据当前分类和搜索关键字过滤新闻数据\r\nconst filteredNews = computed(() => {\r\n  let filtered = news.value;\r\n\r\n  // 根据分类过滤\r\n  if (currentCategory.value !== \"全部\") {\r\n    // 将分类名称映射为对应的 type 值\r\n    const categoryToTypeMap = {\r\n      \"通知公告\": 1,\r\n      \"媒体报道\": 2,\r\n      \"慈善人物\": 3,\r\n    };\r\n    const type = categoryToTypeMap[currentCategory.value];\r\n    filtered = filtered.filter((item) => item.type === type);\r\n  }\r\n\r\n  // 根据搜索关键字过滤（仅在点击查找按钮后触发）\r\n  if (isSearchTriggered.value && searchKeyword.value) {\r\n    filtered = filtered.filter((item) =>\r\n        item.title.includes(searchKeyword.value)\r\n    );\r\n  }\r\n\r\n  return filtered;\r\n});\r\n\r\n// 分页相关逻辑\r\nconst itemsPerPage = 7;\r\nconst currentPage = ref(1);\r\n\r\nconst totalPages = computed(() =>\r\n    Math.ceil(filteredNews.value.length / itemsPerPage)\r\n);\r\n\r\nconst paginatedNews = computed(() => {\r\n  const start = (currentPage.value - 1) * itemsPerPage;\r\n  const end = start + itemsPerPage;\r\n  return filteredNews.value.slice(start, end);\r\n});\r\n\r\n// 上一页\r\nconst prevPage = () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--;\r\n  }\r\n};\r\n\r\n// 下一页\r\nconst nextPage = () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++;\r\n  }\r\n};\r\n\r\n// 首页\r\nconst goToFirstPage = () => {\r\n  currentPage.value = 1;\r\n};\r\n\r\n// 尾页\r\nconst goToLastPage = () => {\r\n  currentPage.value = totalPages.value;\r\n};\r\n\r\n// 切换分类\r\nconst switchCategory = (category) => {\r\n  currentCategory.value = category;\r\n  currentPage.value = 1; // 切换分类时重置到第一页\r\n  isSearchTriggered.value = false; // 重置搜索状态\r\n};\r\n\r\n// 查找新闻\r\nconst searchNews = () => {\r\n  isSearchTriggered.value = true; // 触发搜索\r\n  currentPage.value = 1; // 重置到第一页\r\n};\r\n\r\n// 鼠标悬浮标题\r\nconst hoverTitle = (id) => {\r\n  hoveredTitleId.value = id;\r\n};\r\n\r\n// 重置标题样式\r\nconst resetTitle = () => {\r\n  hoveredTitleId.value = null;\r\n};\r\n\r\n// 截取内容\r\nconst truncateContent = (content) => {\r\n  const text = content.replace(/<[^>]+>/g, \"\"); // 去除HTML标签\r\n  if (text.length > 100) {\r\n    return text.slice(0, 100) + \"...\";\r\n  }\r\n  return text;\r\n};\r\n\r\n// 跳转到项目详情页\r\nconst goToProjectDetail = (projectId) => {\r\n  router.push({ name: 'ProjectDetail', params: { id: projectId } });\r\n};\r\n\r\n// 跳转到新闻详情页\r\nconst goToNewsDetail = (newsId) => {\r\n  router.push({ name: 'NewsDetail', params: { id: newsId } });\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style scoped>\r\n.news-page {\r\n  margin-left: 10%;\r\n  width: 80%;\r\n  display: flex;\r\n  gap: 20px;\r\n  padding: 20px;\r\n}\r\n\r\n/* 左边侧边栏样式 */\r\n.sidebar {\r\n  text-align: center;\r\n  width: 250px;\r\n  padding: 20px;\r\n  border-right: 1px solid #ddd;\r\n}\r\n\r\n.leftNavBar {\r\n  width: 210px;\r\n  height: 42px;\r\n  line-height: 42px;\r\n  background-color: #dd2020;\r\n  border-radius: 4px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  margin-left: 20px;\r\n}\r\n\r\n.sidebar ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.sidebar ul li {\r\n  margin-left: 35px;\r\n  width: 150px;\r\n  padding: 15px;\r\n  color: #333;\r\n  font-size: 14px;\r\n  border-bottom: solid 1px #e5e5e5;\r\n  cursor: pointer;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.sidebar ul li:hover {\r\n  color: #dd2020;\r\n}\r\n\r\n.sidebar ul li.active {\r\n  color: #dd2020; /* 选中时字体变红 */\r\n  font-weight: bold; /* 可选：加粗选中项 */\r\n}\r\n\r\n/* 项目推荐样式 */\r\n.project-list {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.project-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.project-image {\r\n  width: 80px;\r\n  object-fit: cover;\r\n}\r\n\r\n.project-title {\r\n  font-size: 12px;\r\n  color: #333;\r\n}\r\n\r\n.wechat-qr {\r\n  margin-left: 33px;\r\n  width: 180px;\r\n  height: 205px;\r\n  border: 1px solid #cccccc;\r\n  text-align: center;\r\n}\r\n\r\n.wechat-qr img {\r\n  width: 170px;\r\n  height: 170px;\r\n}\r\n\r\n.wechat-qr p {\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n\r\n/* 右边新闻列表样式 */\r\n.main-content {\r\n  flex: 1;\r\n}\r\n\r\n/* 搜索栏样式 */\r\n.search-bar {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.search-input {\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  width: 300px;\r\n  transition: border-color 0.3s ease;\r\n}\r\n\r\n/* 搜索框获取焦点时的样式 */\r\n.search-input:focus {\r\n  border-color: #dd2020; /* 边框变红 */\r\n  outline: none; /* 去除默认的蓝色外边框 */\r\n}\r\n\r\n.search-button {\r\n  padding: 10px 20px;\r\n  background-color: #dd2020;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.search-button:hover {\r\n  background-color: #c40000;\r\n}\r\n\r\n.news-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.news-item {\r\n  display: flex;\r\n  gap: 20px;\r\n  border-bottom: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.news-cover {\r\n  width: 220px;\r\n  object-fit: cover;\r\n}\r\n\r\n.news-content {\r\n  flex: 1;\r\n}\r\n\r\n.news-title {\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.news-title.hovered {\r\n  color: #dd2020; /* 悬浮时标题变红 */\r\n}\r\n\r\n.news-meta {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n  gap: 10px;\r\n  color: #999;\r\n  margin-top: 10px;\r\n  font-size: 14px;\r\n}\r\n\r\n.news-date {\r\n  align-self: center;\r\n}\r\n\r\n.news-content p {\r\n  color: #666;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination button {\r\n  padding: 8px 16px;\r\n  background-color: #e40000;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.pagination button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.pagination button:hover:not(:disabled) {\r\n  background-color: #c40000;\r\n}\r\n</style>\r\n","import script from \"./NewsPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewsPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NewsPage.vue?vue&type=style&index=0&id=5bfee8ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5bfee8ca\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"donation-page\">\r\n    <div class=\"form-container\">\r\n      <!-- 表单栏改为2xn格式 -->\r\n      <div class=\"form-grid\">\r\n        <!-- 时间范围 -->\r\n        <div class=\"form-group\">\r\n          <label>时间：</label>\r\n          <el-date-picker\r\n              v-model=\"queryForm.timeRange\"\r\n              type=\"datetimerange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始时间\"\r\n              end-placeholder=\"结束时间\"\r\n              format=\"YYYY-MM-DD HH:mm:ss\"\r\n              value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n          />\r\n        </div>\r\n\r\n        <!-- 金额范围 -->\r\n        <div class=\"form-group\">\r\n          <label>金额：</label>\r\n          <div class=\"amount-range\">\r\n            <input\r\n                type=\"text\"\r\n                v-model=\"queryForm.minAmount\"\r\n                placeholder=\"最小金额\"\r\n                class=\"amount-input\"\r\n            />\r\n            <span>至</span>\r\n            <input\r\n                type=\"text\"\r\n                v-model=\"queryForm.maxAmount\"\r\n                placeholder=\"最大金额\"\r\n                class=\"amount-input\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 交易类型 -->\r\n        <div class=\"form-group\">\r\n          <label>交易类型：</label>\r\n          <select v-model=\"queryForm.transactionType\">\r\n            <option value=\"\">全部</option>\r\n            <option value=\"资金捐赠\">资金捐赠</option>\r\n            <option value=\"资金转账\">资金转账</option>\r\n            <option value=\"资金拨付\">资金拨付</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- 支付方式 -->\r\n        <div class=\"form-group\">\r\n          <label>支付方式：</label>\r\n          <select v-model=\"queryForm.paymentMethod\">\r\n            <option value=\"\">全部</option>\r\n            <option value=\"微信支付\">微信支付</option>\r\n            <option value=\"支付宝\">支付宝</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- 关键字搜索 -->\r\n        <div class=\"form-group\">\r\n          <label>关键字：</label>\r\n          <input\r\n              type=\"text\"\r\n              v-model=\"queryForm.keyword\"\r\n              placeholder=\"捐赠人或其他关键词\"\r\n              class=\"keyword-input\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 查询和重置按钮靠右 -->\r\n      <div class=\"form-actions\">\r\n        <button class=\"query-button\" @click=\"handleQuery\">查询</button>\r\n        <button class=\"reset-button\" @click=\"resetQuery\">重置</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 在线收入统计 -->\r\n    <div style=\"display: flex\">\r\n      <div style=\"margin: 30px\">\r\n        在线收入\r\n        <span style=\"font-size: 30px; font-weight: 400; color: #d32f2f\">\r\n          ￥{{ totalAmount.toFixed(2) }}\r\n        </span>\r\n        元\r\n      </div>\r\n      <div style=\"margin-top: 45px; margin-left: 500px\">\r\n        本收入情况是针对当前查询条件下所有数据的统计\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 捐赠列表 -->\r\n    <div class=\"donation-list\">\r\n      <table>\r\n        <thead>\r\n        <tr>\r\n          <th>时间</th>\r\n          <th>项目名称</th>\r\n          <th>捐款金额</th>\r\n          <th>捐款人</th>\r\n          <th>捐款类型</th>\r\n          <th>捐款平台</th>\r\n          <th>捐赠地址</th> <!-- 新增列 -->\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"item in paginatedDonationList\" :key=\"item.time\">\r\n          <td>{{ item.time }}</td>\r\n          <td>{{ item.name }}</td>\r\n          <td>{{ item.amount }}</td>\r\n          <td>{{ item.target }}</td>\r\n          <td>{{ item.category }}</td>\r\n          <td>\r\n            <img\r\n                v-if=\"item.platform === '微信支付'\"\r\n                src=\"@/assets/wechat-icon.png\"\r\n                alt=\"微信\"\r\n                class=\"platform-icon\"\r\n            />\r\n            <img\r\n                v-else-if=\"item.platform === '支付宝'\"\r\n                src=\"@/assets/alipay-icon.png\"\r\n                alt=\"支付宝\"\r\n                class=\"platform-icon\"\r\n            />\r\n          </td>\r\n          <td>{{ item.address }}</td> <!-- 新增列 -->\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <!-- 分页 -->\r\n      <div class=\"pagination\">\r\n        <button\r\n            :disabled=\"currentPage === 1\"\r\n            @click=\"currentPage = 1\"\r\n            class=\"pagination-button\"\r\n        >\r\n          首页\r\n        </button>\r\n        <button\r\n            :disabled=\"currentPage === 1\"\r\n            @click=\"currentPage--\"\r\n            class=\"pagination-button\"\r\n        >\r\n          上一页\r\n        </button>\r\n        <button\r\n            v-for=\"page in totalPages\"\r\n            :key=\"page\"\r\n            :class=\"{ active: currentPage === page }\"\r\n            @click=\"currentPage = page\"\r\n            class=\"pagination-button\"\r\n        >\r\n          {{ page }}\r\n        </button>\r\n        <button\r\n            :disabled=\"currentPage === totalPages\"\r\n            @click=\"currentPage++\"\r\n            class=\"pagination-button\"\r\n        >\r\n          下一页\r\n        </button>\r\n        <button\r\n            :disabled=\"currentPage === totalPages\"\r\n            @click=\"currentPage = totalPages\"\r\n            class=\"pagination-button\"\r\n        >\r\n          尾页\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\n\r\n// 查询表单数据\r\nconst queryForm = ref({\r\n  timeRange: [],\r\n  minAmount: '',\r\n  maxAmount: '',\r\n  transactionType: '',\r\n  donorType: '',\r\n  paymentMethod: '',\r\n  keyword: '',\r\n});\r\n\r\n// 分页相关\r\nconst pageSize = 20; // 每页显示 20 条\r\nconst currentPage = ref(1); // 当前页码\r\n\r\n// 原始捐赠列表数据\r\nconst donationList = ref([]);\r\n\r\n// 过滤后的捐赠列表\r\nconst filteredData = ref([]);\r\n\r\n// 总金额计算\r\nconst totalAmount = computed(() => {\r\n  return filteredData.value.reduce((sum, item) => {\r\n    return sum + parseFloat(item.amount);\r\n  }, 0);\r\n});\r\n\r\n// 分页逻辑\r\nconst paginatedDonationList = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize;\r\n  const end = start + pageSize;\r\n  return filteredData.value.slice(start, end);\r\n});\r\n\r\n// 总页数\r\nconst totalPages = computed(() => {\r\n  return Math.ceil(filteredData.value.length / pageSize);\r\n});\r\n\r\n// 查询\r\nconst handleQuery = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const params = {\r\n      projectName: queryForm.value.keyword || null, // 项目名称\r\n      address: queryForm.value.address || null, // 地址\r\n      startDate: queryForm.value.timeRange[0] || null, // 开始时间\r\n      endDate: queryForm.value.timeRange[1] || null, // 结束时间\r\n      paymentMethod: queryForm.value.paymentMethod === ''\r\n          ? null\r\n          : (queryForm.value.paymentMethod === '微信支付' ? 0 : 1), // 支付方式\r\n      username: queryForm.value.keyword || null, // 用户昵称\r\n      minAmount: parseFloat(queryForm.value.minAmount) || null, // 最小金额\r\n      maxAmount: parseFloat(queryForm.value.maxAmount) || null, // 最大金额\r\n      category: queryForm.value.transactionType || null, // 交易类型\r\n      donorType: queryForm.value.donorType || null, // 捐赠人类型\r\n    };\r\n\r\n    // 调用接口获取数据\r\n    const response = await axios.get('/user/finance-records', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params,\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      // 将接口返回的数据映射为前端需要的格式\r\n      donationList.value = response.data.map((record) => ({\r\n        time: formatTime(record.time), // 时间\r\n        name: record.projectName, // 项目名称\r\n        amount: record.amount, // 金额\r\n        target: record.username, // 用户昵称\r\n        category: record.category, // 交易类型\r\n        paymentMethod: record.paymentMethod === 0 ? '微信支付' : '支付宝', // 支付方式\r\n        platform: record.paymentMethod === 0 ? '微信支付' : '支付宝', // 支付平台\r\n        address: record.address, // 捐赠地址\r\n      }));\r\n\r\n      // 更新过滤后的数据\r\n      filteredData.value = [...donationList.value];\r\n      currentPage.value = 1; // 重置到第一页\r\n    } else {\r\n      throw new Error(response.msg || '查询失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('查询失败', error);\r\n    ElMessage.error('查询失败，请稍后重试');\r\n  }\r\n};\r\n\r\n// 时间格式化函数\r\nconst formatTime = (timestamp) => {\r\n  const date = new Date(timestamp);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // 月份从 0 开始，需要加 1\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n  const seconds = String(date.getSeconds()).padStart(2, '0');\r\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n};\r\n\r\n// 重置\r\nconst resetQuery = async () => {\r\n  queryForm.value = {\r\n    timeRange: [],\r\n    minAmount: '',\r\n    maxAmount: '',\r\n    transactionType: '',\r\n    donorType: '',\r\n    paymentMethod: '',\r\n    keyword: '',\r\n  };\r\n\r\n  // 重置后重新获取数据\r\n  await handleQuery();\r\n  console.log('已重置查询条件');\r\n};\r\n\r\n// 初始化加载数据\r\nonMounted(() => {\r\n  handleQuery();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.donation-page {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  color: #d32f2f; /* 红色主题 */\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-container {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.form-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 15px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.form-group label {\r\n  width: 100px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.form-group input,\r\n.form-group select {\r\n  padding: 8px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  flex: 1;\r\n}\r\n\r\n.amount-range {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.amount-range input {\r\n  width: 100px;\r\n}\r\n\r\n.query-button,\r\n.reset-button {\r\n  padding: 8px 12px;\r\n  background-color: #d32f2f; /* 红色主题 */\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n  width: 80px;\r\n}\r\n\r\n.reset-button {\r\n  width: 80px;\r\n  border: none;\r\n  background: #f90;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n}\r\n\r\n.reset-button:hover {\r\n  background-color: #999;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 15px;\r\n}\r\n\r\n.donation-list {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\nth {\r\n  background-color: #d32f2f; /* 红色主题 */\r\n  color: #fff;\r\n}\r\n\r\n.platform-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.pagination-button {\r\n  padding: 8px 12px;\r\n  margin: 0 5px;\r\n  background-color: #fff;\r\n  color: #000;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.pagination-button.active {\r\n  background-color: #d32f2f; /* 红色主题 */\r\n  color: #fff;\r\n}\r\n\r\n.pagination-button:hover:not(:disabled) {\r\n  background-color: #d32f2f; /* 红色主题 */\r\n  color: #fff;\r\n}\r\n\r\n/* 确保地址列宽度合适 */\r\ntd:nth-child(7) {\r\n  min-width: 150px; /* 根据实际需求调整 */\r\n}\r\n</style>\r\n","import script from \"./ApplyPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ApplyPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ApplyPage.vue?vue&type=style&index=0&id=7e1b98c9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7e1b98c9\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"profile-page\">\r\n    <div class=\"container\">\r\n      <div class=\"header\">\r\n        <h1 style=\"color: #CC0000\">个人中心</h1>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div class=\"sidebar\">\r\n          <ul>\r\n            <li :class=\"{ active: activeTab === 'info' }\" @click=\"activeTab = 'info'\">\r\n              <img v-if=\"activeTab === 'info'\" src=\"@/assets/people.png\" class=\"sidebar-icon\">\r\n              <img v-else src=\"@/assets/people1.png\" class=\"sidebar-icon\">\r\n              我的信息\r\n            </li>\r\n            <li :class=\"{ active: activeTab === 'avatar' }\" @click=\"activeTab = 'avatar'\">\r\n              <img v-if=\"activeTab === 'avatar'\" src=\"@/assets/avatar1.png\" class=\"sidebar-icon\">\r\n              <img v-else src=\"@/assets/avatar.png\" class=\"sidebar-icon\">\r\n              我的头像\r\n            </li>\r\n            <li :class=\"{ active: activeTab === 'password' }\" @click=\"activeTab = 'password'\">\r\n              <img v-if=\"activeTab === 'password'\" src=\"@/assets/password2.png\" class=\"sidebar-icon\">\r\n              <img v-else src=\"@/assets/password1.png\" class=\"sidebar-icon\">\r\n              修改密码\r\n            </li>\r\n            <li :class=\"{ active: activeTab === 'donation' }\" @click=\"activeTab = 'donation'\">\r\n              <img v-if=\"activeTab === 'donation'\" src=\"@/assets/donation.png\" class=\"sidebar-icon\">\r\n              <img v-else src=\"@/assets/donation1.png\" class=\"sidebar-icon\">\r\n              我的捐赠\r\n            </li>\r\n            <li :class=\"{ active: activeTab === 'myBarrages' }\" @click=\"activeTab = 'myBarrages'\">\r\n              <img v-if=\"activeTab === 'myBarrages'\" src=\"@/assets/barrage1.png\" class=\"sidebar-icon\">\r\n              <img v-else src=\"@/assets/barrage.png\" class=\"sidebar-icon\">\r\n              我的弹幕\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"main-content\">\r\n          <!-- 我的信息 -->\r\n          <div v-if=\"activeTab === 'info'\" class=\"tab-content\">\r\n            <h2 class=\"tab-title\">\r\n              <img src=\"@/assets/people1.png\" class=\"title-icon\">\r\n              我的信息\r\n            </h2>\r\n            <el-form :model=\"form\" label-width=\"120px\" class=\"xingXi\">\r\n              <el-form-item label=\"昵称\">\r\n                <el-input v-model=\"form.nickname\" placeholder=\"请输入昵称\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"账号\">\r\n                <el-input v-model=\"form.username\" disabled placeholder=\"请输入账号\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"邮箱\">\r\n                <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"电话\">\r\n                <el-input v-model=\"form.phone\" placeholder=\"请输入电话\"></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button type=\"primary\" class=\"save-button\" @click=\"saveInfo\">保存</el-button>\r\n          </div>\r\n\r\n          <!-- 我的头像 -->\r\n          <div v-if=\"activeTab === 'avatar'\" class=\"tab-content\">\r\n            <h2 class=\"tab-title\">\r\n              <img src=\"@/assets/avatar.png\" class=\"title-icon\">\r\n              我的头像\r\n            </h2>\r\n            <div class=\"avatar-content\">\r\n              <label for=\"file_input\" class=\"first-change-lb\">\r\n                <img src=\"//s1.hdslb.com/bfs/static/jinkela/account/assets/local_icon.png\" class=\"first-change-lb_img\">\r\n                <span>选择本地图片</span>\r\n              </label>\r\n              <input type=\"file\" id=\"file_input\" ref=\"avatarInput\" style=\"display: none;\" @change=\"handleAvatarUpload\" accept=\"image/*\">\r\n              <div class=\"border-line\"></div>\r\n              <div class=\"avatar-preview\">\r\n                <img :src=\"avatarUrl\" alt=\"当前头像\" class=\"avatar-image\">\r\n              </div>\r\n            </div>\r\n            <p class=\"descript\">请选择图片上传：大小150 * 150像素支持JPG、PNG等格式，图片需小于2M</p>\r\n            <el-button type=\"primary\" class=\"save-buttonn\" @click=\"saveAvatar\">保存</el-button>\r\n          </div>\r\n\r\n          <!-- 修改密码 -->\r\n          <div v-if=\"activeTab === 'password'\" class=\"tab-content\">\r\n            <h2 class=\"tab-title\">\r\n              <img src=\"@/assets/password1.png\" class=\"title-icon\">\r\n              修改密码\r\n            </h2>\r\n            <el-form :model=\"form\" label-width=\"120px\" class=\"xingXi\">\r\n              <el-form-item label=\"密码\">\r\n                <el-input v-model=\"form.password\" type=\"password\" placeholder=\"请输入新的密码\" show-password></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"确认密码\">\r\n                <el-input v-model=\"form.confirmPassword\" type=\"password\" placeholder=\"请确认密码\" show-password></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-button type=\"primary\" class=\"save-button\" @click=\"savePassword\">保存</el-button>\r\n          </div>\r\n\r\n          <!-- 我的捐赠 -->\r\n          <div v-if=\"activeTab === 'donation'\" class=\"tab-content\">\r\n            <h2 class=\"tab-title\">\r\n              <img src=\"@/assets/donation1.png\" class=\"title-icon\">\r\n              我的捐赠\r\n            </h2>\r\n            <div class=\"donation-content\">\r\n              <!-- 总金额显示 -->\r\n              <div class=\"total-amount\">\r\n                总金额：<span class=\"amount-value\">￥{{ totalDonationAmount }}</span>\r\n              </div>\r\n              <el-table :data=\"paginatedDonationList\" style=\"width: 100%\">\r\n                <el-table-column prop=\"date\" label=\"捐赠日期\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"amount\" label=\"捐赠金额\" width=\"180\">\r\n                  <template #default=\"{ row }\">\r\n                    ￥{{ row.amount }} <!-- 金额前加人民币符号 -->\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"paymentMethod\" label=\"捐赠方式\"></el-table-column>\r\n              </el-table>\r\n              <!-- 分页控件 -->\r\n              <div class=\"pagination\">\r\n                <button\r\n                    v-for=\"page in totalDonationPages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                    @click=\"currentPage = page\"\r\n                >\r\n                  {{ page }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 我的弹幕 -->\r\n          <div v-if=\"activeTab === 'myBarrages'\" class=\"tab-content\">\r\n            <h2 class=\"tab-title\">\r\n              <img src=\"@/assets/barrage.png\" class=\"title-icon\">\r\n              我的弹幕\r\n            </h2>\r\n            <div class=\"barrage-content\">\r\n              <el-table :data=\"paginatedMyBarrages\" style=\"width: 100%\">\r\n                <el-table-column prop=\"content\" label=\"弹幕内容\"></el-table-column>\r\n                <el-table-column prop=\"createdAt\" label=\"发送时间\" width=\"180\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"120\">\r\n                  <template #default=\"{ row }\">\r\n                    <el-button type=\"danger\" size=\"small\" @click=\"deleteBarrage(row.id)\">删除</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <!-- 分页控件 -->\r\n              <div class=\"pagination\">\r\n                <button\r\n                    v-for=\"page in totalBarragePages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                    @click=\"currentPage = page\"\r\n                >\r\n                  {{ page }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\nimport { useRouter } from 'vue-router';\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst router = useRouter();\r\n\r\n// 响应式数据\r\nconst activeTab = ref('info');\r\nconst form = ref({\r\n  nickname: '',\r\n  username: '',\r\n  email: '',\r\n  phone: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n});\r\nconst avatarUrl = ref('https://via.placeholder.com/150'); // 默认头像URL\r\nconst avatarInput = ref(null);\r\n\r\n// 分页相关数据\r\nconst currentPage = ref(1); // 当前页码\r\nconst pageSize = ref(8); // 每页显示的数量\r\n\r\n// 捐赠记录\r\nconst donationList = ref([]);\r\n\r\n// 弹幕记录\r\nconst myBarrages = ref([]);\r\n\r\n// 计算分页后的捐赠数据\r\nconst paginatedDonationList = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize.value;\r\n  const end = start + pageSize.value;\r\n  return donationList.value.slice(start, end);\r\n});\r\n\r\n// 计算分页后的弹幕数据\r\nconst paginatedMyBarrages = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize.value;\r\n  const end = start + pageSize.value;\r\n  return myBarrages.value.slice(start, end);\r\n});\r\n\r\n// 计算捐赠总页数\r\nconst totalDonationPages = computed(() => {\r\n  return Math.ceil(donationList.value.length / pageSize.value);\r\n});\r\n\r\n// 计算弹幕总页数\r\nconst totalBarragePages = computed(() => {\r\n  return Math.ceil(myBarrages.value.length / pageSize.value);\r\n});\r\n\r\n// 计算捐赠总金额\r\nconst totalDonationAmount = computed(() => {\r\n  return donationList.value.reduce((total, record) => total + parseFloat(record.amount), 0).toFixed(2);\r\n});\r\n\r\n// 获取用户信息\r\nconst fetchUserProfile = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get('/user/profile', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const user = response.data;\r\n    form.value.nickname = user.nickname;\r\n    form.value.username = user.username;\r\n    form.value.email = user.email;\r\n    form.value.phone = user.phone;\r\n    avatarUrl.value = user.avatar;\r\n    await fetchDonationList(user.nickname);\r\n    await fetchMyBarrages(user.username); // 获取我的弹幕\r\n  } catch (error) {\r\n    console.error('获取用户信息失败', error);\r\n  }\r\n};\r\n\r\n// 获取捐赠记录\r\nconst fetchDonationList = async (username) => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get('/user/finance-records', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {\r\n        username: username,\r\n      },\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      const donations = response.data.filter(record => record.category === '资金捐赠');\r\n      donationList.value = donations.map(record => ({\r\n        date: new Date(record.time).toLocaleDateString(),\r\n        amount: record.amount.toFixed(2),\r\n        paymentMethod: record.paymentMethod === 0 ? '支付宝' : '微信',\r\n      }));\r\n    } else {\r\n      throw new Error(`请求失败，状态码：${response.code}`);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取捐赠记录失败', error);\r\n    ElMessage.error('获取捐赠记录失败，请稍后重试');\r\n  }\r\n};\r\n\r\n// 获取我的弹幕\r\nconst fetchMyBarrages = async (username) => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.get('/user/barrages', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {\r\n        username: username,\r\n      },\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      myBarrages.value = response.data.map(barrage => ({\r\n        id: barrage.id,\r\n        content: barrage.content,\r\n        createdAt: new Date(barrage.createdAt).toLocaleString(),\r\n      }));\r\n    } else {\r\n      throw new Error('获取我的弹幕失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('获取我的弹幕失败', error);\r\n    ElMessage.error('获取我的弹幕失败，请稍后重试');\r\n  }\r\n};\r\n\r\n// 删除弹幕\r\nconst deleteBarrage = async (barrageId) => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.delete(`/user/barrages/${barrageId}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (response.code === 200) {\r\n      ElMessage.success('弹幕删除成功');\r\n      await fetchMyBarrages(form.value.username); // 重新获取我的弹幕\r\n    } else {\r\n      throw new Error('弹幕删除失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('弹幕删除失败', error);\r\n    ElMessage.error('弹幕删除失败，请稍后重试');\r\n  }\r\n};\r\n\r\n// 处理头像上传\r\nconst handleAvatarUpload = async (event) => {\r\n  const file = event.target.files[0];\r\n  if (file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post('/files/upload', formData, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      // 获取上传后的图片 URL\r\n      avatarUrl.value = response.data;\r\n      ElMessage.success('头像上传成功');\r\n    } catch (error) {\r\n      console.error('上传头像失败', error);\r\n      ElMessage.error('上传头像失败');\r\n    }\r\n  }\r\n};\r\n\r\n// 保存头像\r\nconst saveAvatar = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n\r\n    // 确保 avatarUrl 是一个字符串\r\n    if (typeof avatarUrl.value !== 'string') {\r\n      throw new Error('avatarUrl 不是一个字符串');\r\n    }\r\n\r\n    const requestData = {\r\n      avatar: avatarUrl.value,\r\n    };\r\n\r\n    await axios.put('/user/profile', requestData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    ElMessage.success('头像保存成功');\r\n\r\n    // 乐观加载：立即更新导航栏头像\r\n    if (window.navBarInstance) {\r\n      window.navBarInstance.updateProfile(avatarUrl.value, form.value.nickname);\r\n    }\r\n\r\n    // 刷新页面\r\n    location.reload();\r\n  } catch (error) {\r\n    console.error('保存头像失败', error);\r\n    ElMessage.error('保存头像失败');\r\n  }\r\n};\r\n\r\n// 保存信息\r\nconst saveInfo = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n\r\n    // 检查昵称长度\r\n    if (form.value.nickname.length > 6) {\r\n      ElMessage.error('昵称最多为6位');\r\n      return; // 直接返回，不继续执行\r\n    }\r\n\r\n    const requestData = {\r\n      nickname: form.value.nickname,\r\n      email: form.value.email,\r\n      phone: form.value.phone,\r\n    };\r\n\r\n    const response = await axios.put('/user/profile', requestData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    // 检查响应状态码\r\n    if (response.code !== 200) {\r\n      ElMessage.error('昵称已存在，请换一个昵称');\r\n      return; // 直接返回，不继续执行\r\n    }\r\n\r\n    ElMessage.success('信息保存成功');\r\n\r\n    // 刷新页面\r\n    location.reload();\r\n\r\n    // 乐观加载：立即更新导航栏信息\r\n    if (window.navBarInstance) {\r\n      window.navBarInstance.updateProfile(avatarUrl.value, form.value.nickname);\r\n    }\r\n  } catch (error) {\r\n    console.error('保存信息失败', error);\r\n\r\n    // 处理昵称已存在的错误\r\n    if (error.response && error.response.status === 400 && error.response.data.message === '昵称已存在') {\r\n      ElMessage.error('昵称已存在，请换一个昵称');\r\n    } else {\r\n      ElMessage.error('保存信息失败');\r\n    }\r\n  }\r\n};\r\n\r\n// 保存密码\r\nconst savePassword = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n\r\n    // 检查密码是否一致\r\n    if (form.value.password !== form.value.confirmPassword) {\r\n      throw new Error('两次输入的密码不一致');\r\n    }\r\n\r\n    const requestData = {\r\n      password: form.value.password,\r\n    };\r\n\r\n    await axios.put('/user/profile', requestData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n\r\n\r\n    // 清空密码输入框\r\n    form.value.password = '';\r\n    form.value.confirmPassword = '';\r\n\r\n    // 删除本地 token\r\n    localStorage.removeItem('token');\r\n    ElMessage.success('密码修改成功，请重新登录');\r\n    // 跳转到登录界面\r\n    await router.push('/login-register');\r\n  } catch (error) {\r\n    console.error('保存密码失败', error);\r\n    ElMessage.error('保存密码失败');\r\n  }\r\n};\r\n\r\n// 生命周期钩子\r\nonMounted(() => {\r\n  fetchUserProfile();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.profile-page {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.container {\r\n  width: 800px;\r\n  height: 500px;\r\n  background-color: white;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  position: relative;\r\n  margin-top: -80px;\r\n}\r\n\r\n.header {\r\n  margin-top: -10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.content {\r\n  margin-top: -20px;\r\n  margin-left: -10px;\r\n  display: flex;\r\n  flex: 1;\r\n}\r\n\r\n.sidebar {\r\n  width: 200px;\r\n  border-right: 1px solid #e0e0e0;\r\n  padding-right: 20px;\r\n}\r\n\r\n.sidebar ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.sidebar li {\r\n  padding: 10px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.sidebar li:hover {\r\n  background-color: #ffcccc; /* 红色悬停背景 */\r\n}\r\n\r\n.sidebar li.active {\r\n  background-color: #cc0000; /* 红色选中背景 */\r\n  color: white;\r\n}\r\n\r\n.sidebar-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding-left: 20px;\r\n}\r\n\r\n.xingXi {\r\n  margin-left: -40px;\r\n  margin-top: 100px;\r\n}\r\n\r\n.tab-content {\r\n  padding: 20px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tab-title {\r\n  margin-bottom: 50px;\r\n  margin-top: -90px;\r\n  color: #cc0000; /* 红色标题 */\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.tab-title::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: -15px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 3px;\r\n  height: 20px;\r\n  background-color: #cc0000; /* 红色标题装饰线 */\r\n}\r\n\r\n.title-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.save-button {\r\n  margin-left: 254px;\r\n  background-color: #cc0000; /* 红色按钮 */\r\n  border-color: #cc0000;\r\n}\r\n\r\n.save-button:hover {\r\n  background-color: #a30000; /* 深红色悬停 */\r\n  border-color: #a30000;\r\n}\r\n\r\n.save-buttonn {\r\n  margin-left: 254px;\r\n  margin-top: 20px;\r\n  background-color: #cc0000; /* 红色按钮 */\r\n  border-color: #cc0000;\r\n}\r\n\r\n.save-buttonn:hover {\r\n  background-color: #a30000; /* 深红色悬停 */\r\n  border-color: #a30000;\r\n}\r\n\r\n.avatar-content {\r\n  margin-left: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 80px;\r\n}\r\n\r\n.first-change-lb {\r\n  cursor: pointer;\r\n  background: #f1f2f5;\r\n  width: 178px;\r\n  height: 84px;\r\n  border: 1px solid #e5e9ef;\r\n  border-radius: 4px;\r\n  transition: all .6s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 35px;\r\n}\r\n\r\n.first-change-lb_img {\r\n  width: 24px;\r\n  height: 24px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.border-line {\r\n  height: 182px;\r\n  width: 1px;\r\n  background: #e5e9ef;\r\n  float: left;\r\n}\r\n\r\n.descript {\r\n  margin-top: 40px;\r\n  margin-left: 10px;\r\n  line-height: 16px;\r\n  color: #99a2aa;\r\n  font-size: 15px;\r\n}\r\n\r\n.avatar-preview {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  border: 2px solid #e0e0e0;\r\n  margin-right: 50px;\r\n}\r\n\r\n.avatar-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.pagination button {\r\n  margin: 0 5px;\r\n  padding: 5px 10px;\r\n  border: 1px solid #cc0000;\r\n  background-color: white;\r\n  color: #cc0000;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.pagination button.active {\r\n  background-color: #cc0000;\r\n  color: white;\r\n}\r\n\r\n.pagination button:hover {\r\n  background-color: #cc0000;\r\n  color: white;\r\n}\r\n\r\n.total-amount {\r\n  margin-bottom: 20px;\r\n  font-size: 16px;\r\n  color: #000; /* 总金额文字为黑色 */\r\n}\r\n\r\n.amount-value {\r\n  font-style: italic;\r\n  color: #cc0000; /* 金额值为红色 */\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n","import script from \"./ProfilePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProfilePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProfilePage.vue?vue&type=style&index=0&id=c17ad282&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c17ad282\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router';\r\nimport HomePage from '@/views/HomePage.vue';\r\nimport AboutPage from '@/views/AboutPage.vue';\r\nimport ServicesPage from '@/views/ServicesPage.vue';\r\nimport ProjectDetail from '@/views/ProjectDetail.vue';\r\nimport DonationPage from '@/views/DonationPage.vue';\r\nimport LoginRegister from '@/views/LoginRegister.vue'; // 登录注册界面\r\nimport NewsDetail from '@/views/NewsDetail.vue';\r\nimport ProjectsPage from '@/views/ProjectsPage.vue'; // 公益项目页面\r\nimport NewsPage from '@/views/NewsPage.vue'; // 新闻资讯页面\r\nimport ApplyPage from '@/views/ApplyPage.vue'; // 申请救助页面\r\nimport ProfilePage from '@/views/ProfilePage.vue'; // 个人中心页面\r\n\r\n\r\nconst routes = [\r\n    { path: '/', component: HomePage },\r\n    { path: '/about', component: AboutPage },\r\n    { path: '/services', component: ServicesPage },\r\n    {\r\n        path: '/project/:id',\r\n        name: 'ProjectDetail',\r\n        component: ProjectDetail,\r\n    },\r\n    {\r\n        path: '/donation/:id',\r\n        name: 'DonationPage',\r\n        component: DonationPage,\r\n    },\r\n    {\r\n        path: '/login-register', // 登录注册界面\r\n        name: 'LoginRegister',\r\n        component: LoginRegister,\r\n    },\r\n    {\r\n        path: '/news/:id',\r\n        name: 'NewsDetail',\r\n        component: NewsDetail,\r\n    },\r\n    {\r\n        path: '/projects', // 公益项目页面\r\n        name: 'ProjectsPage',\r\n        component: ProjectsPage,\r\n    },\r\n    {\r\n        path: '/news', // 新闻资讯页面\r\n        name: 'NewsPage',\r\n        component: NewsPage,\r\n    },\r\n    {\r\n        path: '/apply', // 申请救助页面\r\n        name: 'ApplyPage',\r\n        component: ApplyPage,\r\n    },\r\n    // 新增路由\r\n    {\r\n        path: '/profile', // 个人中心页面\r\n        name: 'ProfilePage',\r\n        component: ProfilePage,\r\n    },\r\n];\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes,\r\n});\r\n\r\nexport default router;\r\n","import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport ElementPlus from 'element-plus';\nimport 'element-plus/dist/index.css';\nimport zhCn from 'element-plus/dist/locale/zh-cn.mjs';\nimport axios from 'axios'; // 引入 Axios\n\n// 创建 Vue 应用\nconst app = createApp(App);\n\n// 配置 Axios 全局默认值\naxios.defaults.baseURL = 'http://localhost:8080'; // 后端 API 地址\naxios.defaults.timeout = 5000; // 请求超时时间\n\n// 请求拦截器：在每次请求前将 Token 添加到请求头中\naxios.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`; // 添加 Token 到请求头\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// 响应拦截器：统一处理错误响应\naxios.interceptors.response.use(\n    (response) => {\n        return response.data; // 直接返回响应数据\n    },\n    (error) => {\n        // 处理错误响应\n        if (error.response) {\n            switch (error.response.status) {\n                case 401:\n                    // Token 无效或过期，跳转到登录页\n                    localStorage.removeItem('token');\n                    router.push('/login');\n                    break;\n                case 404:\n                    console.error('请求的资源不存在');\n                    break;\n                case 500:\n                    console.error('服务器内部错误');\n                    break;\n                default:\n                    console.error('请求失败', error.response.status);\n            }\n        }\n        return Promise.reject(error);\n    }\n);\n\n// 将 Axios 挂载到全局属性，方便在组件中使用\napp.config.globalProperties.$axios = axios;\n\n// 使用路由和 Element Plus\napp.use(router);\napp.use(ElementPlus, {\n    locale: zhCn, // 配置 Element Plus 的中文语言包\n});\n\n// 定义全局方法\napp.config.globalProperties.$connectWebSocket = (url, uuid) => {\n    const socket = new WebSocket(`${url}?uuid=${uuid}`);\n\n    socket.onopen = () => {\n        console.log('WebSocket 连接已建立');\n    };\n\n    socket.onmessage = (event) => {\n        console.log('收到消息:', event.data);\n        // 处理收到的消息\n    };\n\n    socket.onclose = () => {\n        console.log('WebSocket 连接已关闭');\n    };\n\n    socket.onerror = (error) => {\n        console.error('WebSocket 错误:', error);\n    };\n};\n\n// 挂载应用\napp.mount('#app');\n\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktemplate_user\"] = self[\"webpackChunktemplate_user\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4829); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["src","_imports_0","alt","width","height","_createElementBlock","_hoisted_1","script","__exports__","render","router","useRouter","route","useRoute","navLinks","name","path","user","ref","avatar","activeIndex","showDropdown","isLoggedIn","closeTimer","checkLoginStatus","async","token","localStorage","getItem","value","response","axios","get","headers","Authorization","code","data","nickname","console","error","msg","logout","socket","isConnected","connectWebSocket","url","uuid","WebSocket","onopen","log","onmessage","event","onclose","setTimeout","onerror","onMounted","watch","newPath","index","findIndex","link","immediate","window","addEventListener","close","goToHome","push","handleNavClick","ElNotification","title","message","icon","LoadingIcon","duration","goToLoginRegister","goToProfile","removeItem","handleMouseEnter","clearTimeout","handleMouseLeave","cancelCloseDropdown","showNavBar","showFooter","carouselItems","fetchCarouselData","goToProjectDetail","projectId","params","id","warn","newsList","fetchNewsRecommendData","goToNewsDetail","newsId","charityProjects","fetchCharityProjects","infoList","fetchInfoDisclosureData","goToFileUrl","fileUrl","open","handleImageError","target","formatDate","dateString","date","Date","toLocaleDateString","getCategoryName","category","categoryMap","currentTab","getDanmuStyle","top","Math","floor","random","animationDuration","messages","newMessage","fetchMessages","Error","map","text","content","style","ElMessage","addMessage","trim","post","success","warning","pauseAnimation","danmuItem","document","querySelectorAll","animationPlayState","resumeAnimation","pageSize","messagePageSize","defaults","common","goToDonationPage","project","image","recordNumber","targetAmount","raisedAmount","donationCount","startDate","endDate","status","details","orgInfo","initiator","receiver","executor","projectInfo","purpose","cost","surplusPlan","invoiceMethod","contact","fundUsage","beneficiaries","leader","tabs","label","activeTab","handleTabChange","tabName","globalProjectName","fetchProjectDetail","checkProjectStatus","fetchFinanceList","projectName","handleApiError","currentDate","start","end","then","go","recommendedProjects","fetchRecommendedProjects","sort","slice","fetchNewsList","financeList","currentPage","paginatedFinanceList","computed","searchForm","username","paymentMethod","timeRange","handleSearch","parseInt","undefined","timestamp","year","getFullYear","month","String","getMonth","padStart","day","getDate","feedbackForm","phone","feedbackRules","required","trigger","min","max","pattern","feedbackFormRef","submitFeedback","validate","valid","requestData","resetFields","catch","newMessageText","submitMessage","review","formattedMessages","hour","minute","createdAt","createdAtDate","toLocaleString","messageCurrentPage","paginatedMessages","activeStep","donationForm","amount","fixedAmounts","paymentMethods","wxImage","alipayImage","agreementDialogVisible","showAgreementDialog","wechatQRCode","wechatQRCodeImage","alipayQRCode","alipayQRCodeImage","rules","donationFormRef","isFormValid","selectAmount","selectPaymentMethod","method","getLocation","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","submitDonation","donationData","isForeign","startCountdown","countdown","timer","setInterval","clearInterval","goBackToHome","onUnmounted","nextStep","prevStep","api","create","baseURL","timeout","proxy","getCurrentInstance","isLogin","loginUsername","loginPassword","registerUsername","registerPassword","confirmPassword","handleLogin","password","isBanned","isBannedNumber","Number","type","setItem","$connectWebSocket","handleRegister","usernameRegex","test","passwordRegex","toggleForm","newsDetail","publisher","fetchNewsDetail","itemsPerPage","tags","activeTag","hoverTag","searchQuery","isSearchTriggered","fetchProjects","filteredProjects","filtered","filter","query","toLowerCase","includes","paginatedProjects","totalPages","ceil","length","visiblePages","pages","maxVisiblePages","startPage","endPage","i","setActiveTag","tag","goToPage","page","categories","currentCategory","searchKeyword","hoveredTitleId","news","fetchNews","randomProjects","shuffled","filteredNews","categoryToTypeMap","item","paginatedNews","prevPage","nextPage","goToFirstPage","goToLastPage","switchCategory","searchNews","hoverTitle","resetTitle","truncateContent","replace","queryForm","minAmount","maxAmount","transactionType","donorType","keyword","donationList","filteredData","totalAmount","reduce","sum","parseFloat","paginatedDonationList","handleQuery","address","record","time","formatTime","platform","hours","getHours","minutes","getMinutes","seconds","getSeconds","resetQuery","form","email","avatarUrl","avatarInput","myBarrages","paginatedMyBarrages","totalDonationPages","totalBarragePages","totalDonationAmount","total","toFixed","fetchUserProfile","fetchDonationList","fetchMyBarrages","donations","barrage","deleteBarrage","delete","barrageId","handleAvatarUpload","file","files","formData","FormData","append","saveAvatar","put","navBarInstance","updateProfile","location","reload","saveInfo","savePassword","routes","component","HomePage","AboutPage","ServicesPage","ProjectDetail","DonationPage","LoginRegister","NewsDetail","ProjectsPage","NewsPage","ApplyPage","ProfilePage","createRouter","history","createWebHistory","app","createApp","App","interceptors","request","use","config","globalProperties","$axios","ElementPlus","locale","zhCn","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","this","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}